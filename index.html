<!DOCTYPE html>
<html>
<div class="powerPopup">
  <div class="powerPopupContent">
    <div  class="powerCloseButtonWrapper" onclick="hidePowerPopup();">
      <img src="img/cancel.png" width="32" height="32"></img>
    </div>
    <div  id="powerPopupContent">
    </div>

  </div>
</div>
  <head>
   <meta charset="utf-8">
   <link rel="stylesheet" type="text/css" href="css/powerwidgets.css">
   <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css?family=Fredoka+One" rel="stylesheet">
   <link href="css/switchery.css" rel="stylesheet">
   <script type="text/javascript" src="js/switchery.js"></script>

   <script type="text/javascript" src="//city.power-h2020.eu/redesign_js/client.js"></script> <!-- need to include this script to talk with the api -->
  </head>

  <body  onresize="resize()">

    <div class="indicators">
      <div class="indicator indicatora">
        <div class="powerMessage" style="height: 30px !important;color: white;">
          <span style="display:flex;flex-direction:row;" >
            <span style="font-size:1.5em !important;padding-left: 10px;"><span class="lan_total_points"> Total Score:&nbsp; </span><span id="total_score"></span></span>
            <span style="display: flex;flex-direction: row;justify-content: space-between;flex: .8;" id="links">

            </span>
          </span>
        </div>
        <!-- <div class="arrow-down" onclick="toggleHideableArea(this)" data="1"></div> -->
        <div class="powerTitle" id="preparedness"> <span class="lan_title_personal_preparedness"> Personal Preparedness </span> <img src="img/information.png" height="22" width="22" class="infoButton" onclick="m1()"></img></div>
        <div class="hideable-area">
          <div class="toggleWrapper">
            <input type="checkbox" class="js-switch"  />
            <div style="font-family: 'Fredoka One', cursive;" class="lan_show_levels">Show Community</div>
          </div>
          <div class="circularWrapper">
            <div class="svgWrapper">
              <div class="circularTitle" ><span id="problem_awareness" style="color: #6d0949;">Problem<br> Awareness </span><br><span style="font-size: small;"></span></div>
              <svg
                 class="progress-ring"
                 width="140"
                 fill="#13377f"
                 height="140"
                 shape-rendering="geometricPrecision"
                 >
                <circle
                  id="circ_1"
                  class="progress-ring__circle"
                  transform="rotate(-90 0 0)"
                  stroke="#6d0949"
                  stroke-width="50"
                  fill="#13377f"
                  r="30"
                  cx="70"
                  cy="70"/>
                <circle
                  stroke="white"
                  stroke-width="2"
                  fill="#6d0949"
                  r="30"
                  cx="70"
                  cy="70"/>
                <circle
                  stroke="#6d0949"
                  stroke-width="2"
                  fill="transparent"
                  r="57"
                  cx="70"
                  cy="70"/>
                <line x1="0" y1="70" x2="140" y2="70" style="stroke:rgb(109,9,73);stroke-width:2"/>
                <line x1="70" y1="0" x2="70" y2="140" style="stroke:rgb(109,9,73);stroke-width:2"/>

                <image xlink:href="img/prob_awe.png" height="140" width="140"  rx="15" ry="15" />

              </svg>
              <div class="points_flex">
                <div class="points_row l">
                  <div class="points_left" id="pa_points">
                    0
                  </div>
                   <div class="circularLevelsWrapper" id="circularLevels1">
                    <img src="img/circ_talk_gray.png" class="iconsmall"/>
                    <img src="img/circ_talk_gray.png" class="iconsmall"/>
                    <img src="img/circ_talk_gray.png" class="iconsmall"/>
                  </div>
                </div>
                <div class="points_separator">
                  /
                </div>
                <div class="points_row r">
                  <div class="points_right" id="pag_points">
                    0
                  </div>
                  <div class="community_label">
                    Community
                  </div>
                </div>
              </div>

            </div>
            <div class="svgWrapper">
              <div class="circularTitle" ><span id="know_how">Know- <br>How</span><br> <span  style="font-size: small;"></span></div>

              <svg
                 class="progress-ring"
                 width="140"
                 fill="#13377f"
                 height="140"
                 shape-rendering="geometricPrecision"
                 >
                <circle
                  class="progress-ring__circle"
                  transform="rotate(-90 0 0)"
                  stroke="#13377f"
                  stroke-width="50"
                  fill="#13377f"
                  r="30"
                  cx="70"
                  cy="70"
                  id="circ_2"
                  />
                <circle
                  stroke="white"
                  stroke-width="2"
                  fill="#13377f"
                  r="30"
                  cx="70"
                  cy="70"/>
                <circle
                  stroke="#13377f"
                  stroke-width="2"
                  fill="transparent"
                  r="57"
                  cx="70"
                  cy="70"/>
                  <line x1="0" y1="70" x2="140" y2="70" style="stroke:rgb(19,55,127);stroke-width:2"/>
                  <line x1="70" y1="0" x2="70" y2="140" style="stroke:rgb(19,55,127);stroke-width:2"/>
                <image xlink:href="img/idea.png" height="140" width="140"  rx="15" ry="15" />
              </svg>
              <div class="points_flex">
                <div class="points_row l">
                  <div class="points_left kh_bg" id="kh_points">
                    0
                  </div>
                  <div class="circularLevelsWrapper"  id="circularLevels2">
                    <img src="img/circ_idea_gray.png" class="iconsmall"/>
                    <img src="img/circ_idea_gray.png" class="iconsmall"/>
                    <img src="img/circ_idea_gray.png" class="iconsmall"/>
                  </div>
                </div>
                <div class="points_separator kh_txt">
                  /
                </div>
                <div class="points_row r">
                  <div class="points_right kh_txt" id="khg_points">
                    0
                  </div>
                  <div class="community_label kh_txt">
                    Community
                  </div>
                </div>
              </div>


            </div>

            <div class="svgWrapper">
              <div class="circularTitle" ><span id="ready_to_act" class="ra_txt">Ready <br>to Act</span><br><span style="font-size: small;"></span></div>

              <svg
                 class="progress-ring"
                 width="140"
                 fill="#493f8d"
                 height="140"
                 shape-rendering="geometricPrecision"
                 >
                <circle
                  class="progress-ring__circle"
                  transform="rotate(-90 0 0)"
                  stroke="#493f8d"
                  stroke-width="50"
                  fill="#493f8d"
                  r="30"
                  cx="70"
                  cy="70"
                  id="circ_3"
                  />
                <circle
                  stroke="white"
                  stroke-width="2"
                  fill="#493f8d"
                  r="30"
                  cx="70"
                  cy="70"/>
                <circle
                  stroke="#493f8d"
                  stroke-width="2"
                  fill="transparent"
                  r="57"
                  cx="70"
                  cy="70"/>
                  <line x1="0" y1="70" x2="140" y2="70" style="stroke:rgb(73,63,141);stroke-width:2"/>
                  <line x1="70" y1="0" x2="70" y2="140" style="stroke:rgb(73,63,141);stroke-width:2"/>
                <image xlink:href="img/ready_act.png" height="140" width="140"  rx="15" ry="15" />
              </svg>
              <div class="points_flex">
                <div class="points_row l">
                  <div class="points_left ra_bg" id="ra_points" >
                    0
                  </div>
                  <div class="circularLevelsWrapper" id="circularLevels3">
                    <img src="img/circ_stopwatch_gray.png" class="iconsmall"/>
                    <img src="img/circ_stopwatch_gray.png" class="iconsmall"/>
                    <img src="img/circ_stopwatch_gray.png" class="iconsmall"/>
                  </div>
                </div>
                <div class="points_separator ra_txt">
                  /
                </div>
                <div class="points_row r">
                  <div class="points_right ra_txt" id="rag_points" >
                    0
                  </div>
                  <div class="community_label ra_txt">
                    Community
                  </div>
                </div>
              </div>

            </div>
        </div>
      </div>


      </div>
    <div class="powerMessage">&nbsp;</div>

      <div class="indicator indicatorb">
        <!-- <div class="arrow-down" onclick="toggleHideableArea(this)"></div> -->

        <div class="powerTitle" > <span class="lan_title_personal_impact"> Personal Impact </span><img src="img/information.png" height="22" width="22" class="infoButton" onclick="m2()"></img></div>
        <div class="hideable-area" style="padding-bottom: 20px;">
          <div class="toggleWrapper">
            <input type="checkbox" class="js-switch" />
            <div style="font-family: 'Fredoka One', cursive;" class="lan_show_levels">Show Community</div>
          </div>

          <div class="points_flex_bar">
            <div class="powerRowTitle in_txt">Individual</div>
            <div class="points_bar_wrapper">
              <div class="points_row_bar l ">
                <div class="points_left_bar in_bg" id="bar_title_score_IN">
                  0
                </div>
                 <div class="powerBarLevelsWrapper" id="powerBarLevels3" style="display: block;">
                   <img src="img/people_gray.png" class="iconsmall"/>
                   <img src="img/people_gray.png" class="iconsmall"/>
                   <img src="img/people_gray.png" class="iconsmall"/>
                 </div>
              </div>
              <div class="points_separator_bar in_txt" style="display:none">
                /
              </div>
              <div class="points_row_bar r" style="display:none">
                <div class="points_left_bar in_bg" id="bar_title_score_IN_g">
                  0
                </div>
                <div class="community_label_barp in_txt">
                  Community
                </div>
              </div>
            </div>
          </div>
          <div class="powerRow">
            <div class="iconWrapper individual">
              <img src="img/people.png" class="icon political"/>
            </div>
            <div class="pwrapper">
              <div class="powerBar individual">
                <div class="powerScaleWrapper" style="">
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                  <div class="powerScale individual">
                  </div>
                </div>
                <div class="fill individual" style="width: 0%;" id="powerBar3"></div>
              </div>
            </div>
          </div>
          </div>

        <div class="points_flex_bar">
          <div class="powerRowTitle pb_txt">Political</div>
          <div class="points_bar_wrapper">
            <div class="points_row_bar l">
              <div class="points_left_bar pb_bg" id="bar_title_score_PA">
                0
              </div>
               <div class="powerBarLevelsWrapper" id="powerBarLevels1" style="display: block;">
                 <img src="img/political_gray.png" class="iconsmall">
                 <img src="img/political_gray.png" class="iconsmall">
                 <img src="img/political_gray.png" class="iconsmall">
               </div>
            </div>
            <div class="points_separator_bar pb_txt" style="display:none">
              /
            </div>
            <div class="points_row_bar r" style="display:none">
              <div class="points_left_bar pb_bg" id="bar_title_score_PA_g">
                0
              </div>
              <div class="community_label_barp pb_txt">
                Community
              </div>
            </div>
          </div>
        </div>
        <div class="powerRow">
          <div class="powerBarWrapper">
            <!-- <div class="powerBarLevelsWrapper" id="powerBarLevels1">
              <img src="img/political.png" class="iconsmall"/>
              <img src="img/political.png" class="iconsmall"/>
              <img src="img/political_gray.png" class="iconsmall"/>
            </div> -->
            <div class="iconWrapper political">
              <img src="img/political.png" class="icon political"/>
            </div>
            <div class="pwrapper">
              <div class="powerBar political">
                <div class="powerScaleWrapper" style="">
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                  <div class="powerScale political">
                  </div>
                </div>

                <div class="fill political" style="width: 0%;" id="powerBar1"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="points_flex_bar">
          <div class="powerRowTitle so_txt">Social</div>
          <div class="points_bar_wrapper">
            <div class="points_row_bar l ">
                       <div class="points_left_bar so_bg" id="bar_title_score_SO">
                         0
                       </div>
                         <div class="powerBarLevelsWrapper" id="powerBarLevels2" style="display: block;">
                           <img src="img/users-group_gray.png" class="iconsmall">
                           <img src="img/users-group_gray.png" class="iconsmall">
                           <img src="img/users-group_gray.png" class="iconsmall">
                         </div>
           </div>
            <div class="points_separator_bar so_txt" style="display:none;">
              /
            </div>
            <div class="points_row_bar r" style="display:none">
              <div class="points_left_bar so_bg" id="bar_title_score_SO_g">
                0
              </div>
              <div class="community_label_barp so_txt">
                Community
              </div>
            </div>
          </div>
        </div>
        <div class="powerRow">

          <!-- <div class="powerBartitle"><span class="lan_social">Social</span><br><span id="bar_title_score_SO"></span></div><div class="powerBarWrapper"> -->
            <!-- <div class="powerBarLevelsWrapper"  id="powerBarLevels2">
              <img src="img/users-group.png" class="iconsmall"/>
              <img src="img/users-group.png" class="iconsmall"/>
              <img src="img/users-group_gray.png" class="iconsmall"/>
            </div> -->
            <div class="iconWrapper social">
              <img src="img/users-group.png" class="icon political"/>
            </div>
            <div class="pwrapper">
              <div class="powerScaleWrapper" style="">
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
                <div class="powerScale social">
                </div>
              </div>
              <div class="powerBar social">
                <div class="fill social" style="width: 0%;" id="powerBar2"></div>
              </div>
            </div>
          </div>
          <!-- <div class="powerBarCommunityScore"><span class="pi_points" id="g_so"><span class="pi_separator">/</span><span class="pi_points_amount">3600</span></div> -->

        </div>



      </div>

      <div class="powerMessageText lan_power_message_1" id="achievement">Become better prepared for flooding by increasing your impact and preparedness!</div>
      <div class="powerMessage" id="achievement">&nbsp;</div>
    </div>

    <div class="indicator indicatorc">
      <!-- <div class="arrow-down" onclick="toggleHideableArea(this)"></div> -->
      <div class="powerTitle" ><span id="title_flood_warden"> Flood Warden Achievement </span><img src="img/information.png" height="22" width="22" class="infoButton" onclick="m5()"></img></div>
      <div class="hideable-area">
          <div class="powerContent" style="width:100%">
            <div class="warden">
            <div id="warden_bar_0">
              <div id="warden_bar0_fill"  style="width:0%"></div>
            </div>
            <div class="badge"   id="badge1" >
              <img src="img/badge1.png" id="badge_img1"/>
              <div class="level_lbl"><b class="lan_beginner">Beginner</b> 500</div>
            </div>
            <div id="warden_bar_1">
              <div id="warden_bar1_fill"  style="width:0%"></div>
            </div>
            <div class="badge " id="badge2">
              <img src="img/badge2.png" id="badge_img2"/>
              <div class="level_lbl"><b class="lan_itermidiate">Intermediate</b> 5000</div>
            </div>
            <div id="warden_bar_2">
              <div id="warden_bar2_fill" style="width:0%"></div>
            </div>
            <div class="badge " id="badge3">
              <img src="img/badge3.png" id="badge_img3"/>
              <div class="level_lbl"><b class="lan_advanced">Advanced</b> 9000</div>
            </div>
          </div>
          </div>
      </div>
    </div>
    <span class="powerMessageText lan_power_message_2" id="community"  style="float: right;border-bottom: 2px solid #36c;" >Try hard to become an Advanced Flood Warden!</span>
    <div class="indicator indicatorc">
      <!-- <div class="arrow-down" onclick="toggleHideableArea(this)"></div> -->
      <div class="powerTitle" ><span class="lan_boost_factor">Feedback Multiplier</span><img src="img/information.png" height="22" width="22" class="infoButton" onclick="m3()"></img></div>
      <div class="hideable-area">
        <div class="powerContent" style="width:100%">
            <div class="boost_factor_wrapper">
              <div class="boost_factor 1">1.5x</div>
              <div class="boost_factor 2">2x</div>
              <div class="boost_factor 3">3x</div>
            </div>
        </div>
      </div>
    </div>
    <div class="powerMessage" id="community">&nbsp;</div>
    <div class="indicator indicatord">
      <div class="powerTitle"><span class="lan_community_preparedness">Overall view</span> <img src="img/information.png" height="22" width="22" class="infoButton" onclick="m4()"></img></div>
      <!-- <div class="arrow-down" onclick="toggleHideableArea(this)"></div> -->
      <div class="hideable-area">
      <div class="toggleWrapper">

      </div>
      <div class="toggleWrapper">
        <input type="checkbox" class="js-switch" checked  id="check_personal"/>
        <div style="font-family: 'Fredoka One', cursive;" class="lan_show_personal">Show Personal</div>
      </div>

      <div style="margin-left:auto;margin-right:auto;height:600px">
        <canvas id="spider" height="600" width="750" style="z-index:1"></canvas>
        <div class="powerMessageText lan_power_message_4" >Help the community become equally prepared for flooding in all the categories.</div>
        <div class="powerMessage">&nbsp;</div>

      </div>
      </div>
    </div>

  </div>
  </div>
  </body>
<script>
WIDTH = -1;
HEIGHT = -1;
_loc = {
  "es":{
    "lan_title_personal_preparedness":"Preparación Personal",
    "lan_title_community_preparedness":"Preparación de la Comunidad",
    "lan_title_personal_impact": "Impacto Personal",
    "lan_title_community_impact": "Impacto de la Comunidad",
    "problem_awareness": "Conciencia del <br>problema",
    "know_how": "Saber cómo",
    "ready_to_act": "Listo para <br>actuar",
    "lan_show_levels":"Mostrar Comunidad",
    "lan_social":"Social",
    "lan_political":"Político",
    "lan_individual":"Individual",
    "title_flood_warden":"Logro: Guardián del Agua",
    "lan_beginner":"Principiante",
    "lan_itermidiate":"Intermedio",
    "lan_advanced":"Avanzado",
    "lan_boost_factor":"Multiplicador de Realimentación",
    "lan_community_preparedness":"Vista general",
    "lan_show_personal":"Mostrar personal",
    "lan_total_points":"Puntos Totales:",
    "lan_impact":"Impacto",
    "lan_spider_ready_to_act": "Listo para actuar",
    "lan_spider_know_how": "Saber cómo",
    "lan_spider_awareness": "Conciencia",
    "lan_spider_goal":"Meta",
    "lan_community":"Comunidad",
    "lan_personal": "Personal",
    "lan_community_members": "Miembros",
    "lan_community_size": "Tamaño de la comunidad",
    "lan_community_size_legend":"Incremento en miembros desde Ago 2018: ",
    "lan_community_small": "Pequeña",
    "lan_community_medium": "Media",
    "lan_community_big": "Grande",
    "lan_help_m1_title": "",
    "lan_help_m1_content": "<p class='popup_title'> Personal Preparedness </p> <p>For each activity you do on the platform, you receive points in a variety of categories. Three of these categories relate to personal preparedness: problem awareness, know-how and readiness to act. For example, if you read an article about the risk of flooding - you increase your awareness, whereas if you read about tips how to save water - you get points in readiness to act. </p><p>Further, the preparedness points can be on three different levels; individual, social and political. In order to be prepared for the water issues addressed on the platform, you need to receive points in all of the preparedness categories. </p><p>The visualization graphically displays the sum of points you achieved in the preparedness categories (see the red box in the image below). </p><p><img src='img/instructions/a.png' class='instruction_img'></p> <p>In this view, you can also switch to <b>“Community preparedness”</b> and see the scores that the members of the community achieved on average in the summatory preparedness categories: problem awareness, know-how and ready to act. </p>",
    "lan_help_m2_title": "",
    "lan_help_m2_content": "<p class='popup_title'> Personal Impact </p>  <p>Personal impact shows how the actions you do on the platform can have impact on individual, social and political levels.  For example, if you share a certain issue about water with others, it also has social impact. If you attend a water-related event, you show your political participation. </p><p>Further, the personal impact can be on different levels: problem awareness, know-how and readiness to act. In order to be prepared for the water issues, you need to receive points in all the impact categories. </p><p>This visualization graphically displays the sum of points you achieved in each of the impact categories (see red box in the image below). </p><p><img src='img/instructions/b.png' class='instruction_img'></p><p>In this view, you can also switch to <b>“Community impact”</b> and see the scores that the members of the community achieved on average in the summatory impact categories: individual, social and political impact. </p>",
    "lan_help_m3_title": "",
    "lan_help_m3_content":"<p class='popup_title'> Feedback multiplier  </p> <p>Feedback multiplier reflects the value of feedback you give to others on the platform. The more you engage on the platform, and the higher your score is, the higher is the value of your feedback to others. So, anytime you like or comment on the platform, your feedback will be multiplied by a certain factor. </p><p>At the start, all feedback is not multiplied, but once you have earned some points and achieved a beginner level in the achievement badges, then the feedback is multiplied with 1.5. This goes on until you reach the advanced level, in which case your feedback will be multiplied by 3 representing very high value. Please note that as opposed to a badge, feedback multiplier is not “collected” but is changed to a higher value once you have reached it. </p><p>Additionally, with this factor your votes in the Idea generation contest will be weighted. </p>",
    "lan_help_m4_title": "",
    "lan_help_m4_content":"<p class='popup_title'> Overall View </p> <p><p>In the overall view, you can see your scores in all the nine categories (see table below). The goal is to try to gain an equal amount of points in each of the categories so that you are equally well prepared on all 9 categories. </p><p><img src='img/instructions/c.png' class='instruction_img'></p><p>You can see the scores the community members obtained on average in each of these categories. By toggling the option “show personal” you can display your personal scores that you obtained in each category. </p><p>Additionally, you can see how many people are in your community currently. This information is important to understand the breadth of preparedness of your community. </p>",
    "lan_help_m5_title": "",
    "lan_help_m5_content":"<p class='popup_title'> Achievement Badges  </p> <p>The achievement badges show the overall progress you have made on the platform to prepare yourself for the water issues. </p><p>Once you achieve a “Beginner” level, you become aware of the need to prepare yourself. On the “intermediate” level, you already achieved a certain amount of preparedness. On the “advanced” level you can consider yourself to be fully prepared for the water issues at hand. </p><p>The number of points required to receive each badge are shown as well as your progress towards each of them. </p>",
    "lan_help_m6_title": "",
    "lan_help_m6_content":"<p>Once the progress bar is full, you go to the next level and you fill the bar from the start.</p><p>Show Community displays the level you have already achieved by a colored icon relating to the category where the level has been increased.</p>",
    "lan_power_message_0":"",
    "lan_power_message_1":"Preparate mejor en la reutilización del agua incrementando tu impacto y preparación",
    "lan_power_message_2":"Intenta volverte un Guardián Avanzado del Agua!",
    "lan_power_message_3":"",
    "lan_power_message_4":"Ayuda a la comunidad volverse igual de preparados ante las inundaciones en todas las categorías.",
  },
  "cat":{
    "lan_title_personal_preparedness":"Preparació Personal",
    "lan_title_community_preparedness":"Preparació de la Comunitat",
    "lan_title_personal_impact": "Impacte Personal",
    "lan_title_community_impact": "Impacte comunitari",
    "problem_awareness": "Conscienciació <br>del problema",
    "know_how": "Coneixements",
    "ready_to_act": "Preparat",
    "lan_show_levels":"Mostrar Comunitat",
    "lan_social":"Social",
    "lan_political":"Polític",
    "lan_individual":"Individual",
    "title_flood_warden":"Repte de Guardia de l’Aigua",
    "lan_beginner":"Principiant",
    "lan_itermidiate":"Intermedi",
    "lan_advanced":"Avançat",
    "lan_boost_factor":"Multiplicador per valoracions",
    "lan_community_preparedness":"Vista general",
    "lan_show_personal":"Mostra el personal",
    "lan_total_points":"Puntuació Total:",
    "lan_impact":"Impacte",
    "lan_spider_ready_to_act": "Preparat",
    "lan_spider_know_how": "Coneixements",
    "lan_spider_awareness": "Conscienciació",
    "lan_spider_goal":"Objectiu",
    "lan_community":"comunitat",
    "lan_personal": "Personal",
    "lan_community_members": "Membres",
    "lan_community_size": "Mida de la comunitat",
    "lan_community_small": "Petita",
    "lan_community_medium": "Mitjana",
    "lan_community_big": "Gran",
    "lan_help_m1_title": "",
    "lan_help_m1_content": "<p class='popup_title'> Personal Preparedness </p> <p>For each activity you do on the platform, you receive points in a variety of categories. Three of these categories relate to personal preparedness: problem awareness, know-how and readiness to act. For example, if you read an article about the risk of flooding - you increase your awareness, whereas if you read about tips how to save water - you get points in readiness to act. </p><p>Further, the preparedness points can be on three different levels; individual, social and political. In order to be prepared for the water issues addressed on the platform, you need to receive points in all of the preparedness categories. </p><p>The visualization graphically displays the sum of points you achieved in the preparedness categories (see the red box in the image below). </p><p><img src='img/instructions/a.png' class='instruction_img'></p> <p>In this view, you can also switch to <b>“Community preparedness”</b> and see the scores that the members of the community achieved on average in the summatory preparedness categories: problem awareness, know-how and ready to act. </p>",
    "lan_help_m2_title": "",
    "lan_help_m2_content": "<p class='popup_title'> Personal Impact </p>  <p>Personal impact shows how the actions you do on the platform can have impact on individual, social and political levels.  For example, if you share a certain issue about water with others, it also has social impact. If you attend a water-related event, you show your political participation. </p><p>Further, the personal impact can be on different levels: problem awareness, know-how and readiness to act. In order to be prepared for the water issues, you need to receive points in all the impact categories. </p><p>This visualization graphically displays the sum of points you achieved in each of the impact categories (see red box in the image below). </p><p><img src='img/instructions/b.png' class='instruction_img'></p><p>In this view, you can also switch to <b>“Community impact”</b> and see the scores that the members of the community achieved on average in the summatory impact categories: individual, social and political impact. </p>",
    "lan_help_m3_title": "",
    "lan_help_m3_content":"<p class='popup_title'> Feedback multiplier  </p> <p>Feedback multiplier reflects the value of feedback you give to others on the platform. The more you engage on the platform, and the higher your score is, the higher is the value of your feedback to others. So, anytime you like or comment on the platform, your feedback will be multiplied by a certain factor. </p><p>At the start, all feedback is not multiplied, but once you have earned some points and achieved a beginner level in the achievement badges, then the feedback is multiplied with 1.5. This goes on until you reach the advanced level, in which case your feedback will be multiplied by 3 representing very high value. Please note that as opposed to a badge, feedback multiplier is not “collected” but is changed to a higher value once you have reached it. </p><p>Additionally, with this factor your votes in the Idea generation contest will be weighted. </p>",
    "lan_help_m4_title": "",
    "lan_help_m4_content":"<p class='popup_title'> Overall View </p> <p><p>In the overall view, you can see your scores in all the nine categories (see table below). The goal is to try to gain an equal amount of points in each of the categories so that you are equally well prepared on all 9 categories. </p><p><img src='img/instructions/c.png' class='instruction_img'></p><p>You can see the scores the community members obtained on average in each of these categories. By toggling the option “show personal” you can display your personal scores that you obtained in each category. </p><p>Additionally, you can see how many people are in your community currently. This information is important to understand the breadth of preparedness of your community. </p>",
    "lan_help_m5_title": "",
    "lan_help_m5_content":"<p class='popup_title'> Achievement Badges  </p> <p>The achievement badges show the overall progress you have made on the platform to prepare yourself for the water issues. </p><p>Once you achieve a “Beginner” level, you become aware of the need to prepare yourself. On the “intermediate” level, you already achieved a certain amount of preparedness. On the “advanced” level you can consider yourself to be fully prepared for the water issues at hand. </p><p>The number of points required to receive each badge are shown as well as your progress towards each of them. </p>",
    "lan_help_m6_title": "",
    "lan_help_m6_content":"<p>Once the progress bar is full, you go to the next level and you fill the bar from the start.</p><p>Show Community displays the level you have already achieved by a colored icon relating to the category where the level has been increased.</p>",
    "lan_power_message_0":"",
    "lan_power_message_1":"Estigués millor preparat/da per a la reutilització d’aigua incrementant el teu impacte i preparació! ",
    "lan_power_message_2":"Esforça’t per ser un Guardià de l’Aigua de nivell avançat! ",
    "lan_power_message_3":"",
    "lan_power_message_4":"Ajuda a la comunitat a estar igualment preparada per les inundacions en totes les categories"
  },
  "en":{
    "lan_title_personal_preparedness":"Personal Preparedness",
    "lan_title_community_preparedness":"Community Preparedness",
    "lan_title_personal_impact": "Personal Impact",
    "lan_title_community_impact": "Community Impact",
    "lan_impact":"Impact",
    "lan_social":"Social",
    "lan_political":"Political",
    "lan_individual":"Individual",
    "lan_spider_ready_to_act": "Ready to act",
    "lan_spider_know_how": "Awareness",
    "lan_spider_awareness": "Know-how",
    "lan_spider_goal": "Goal",
    "lan_community":"Community",
    "lan_personal": "Personal",
    "lan_community_members": "Members",
    "lan_community_size": "Community size:",
    "lan_community_size_legend":"Increase in members since Aug 2018: ",
    "lan_community_small": "Small",
    "lan_community_medium": "Medium",
    "lan_community_big": "Large",
    "lan_help_m1_title": "",
    "lan_help_m1_content": "<p class='popup_title'> Personal Preparedness </p> <p>For each activity you do on the platform, you receive points in a variety of categories. Three of these categories relate to personal preparedness: problem awareness, know-how and readiness to act. For example, if you read an article about the risk of flooding - you increase your awareness, whereas if you read about tips how to save water - you get points in readiness to act. </p><p>Further, the preparedness points can be on three different levels; individual, social and political. In order to be prepared for the water issues addressed on the platform, you need to receive points in all of the preparedness categories. </p><p>The visualization graphically displays the sum of points you achieved in the preparedness categories (see the red box in the image below). </p><p><img src='img/instructions/a.png' class='instruction_img'></p> <p>In this view, you can also switch to <b>“Community preparedness”</b> and see the scores that the members of the community achieved on average in the summatory preparedness categories: problem awareness, know-how and ready to act. </p>",
    "lan_help_m2_title": "",
    "lan_help_m2_content": "<p class='popup_title'> Personal Impact </p>  <p>Personal impact shows how the actions you do on the platform can have impact on individual, social and political levels.  For example, if you share a certain issue about water with others, it also has social impact. If you attend a water-related event, you show your political participation. </p><p>Further, the personal impact can be on different levels: problem awareness, know-how and readiness to act. In order to be prepared for the water issues, you need to receive points in all the impact categories. </p><p>This visualization graphically displays the sum of points you achieved in each of the impact categories (see red box in the image below). </p><p><img src='img/instructions/b.png' class='instruction_img'></p><p>In this view, you can also switch to <b>“Community impact”</b> and see the scores that the members of the community achieved on average in the summatory impact categories: individual, social and political impact. </p>",
    "lan_help_m3_title": "",
    "lan_help_m3_content":"<p class='popup_title'> Feedback multiplier  </p> <p>Feedback multiplier reflects the value of feedback you give to others on the platform. The more you engage on the platform, and the higher your score is, the higher is the value of your feedback to others. So, anytime you like or comment on the platform, your feedback will be multiplied by a certain factor. </p><p>At the start, all feedback is not multiplied, but once you have earned some points and achieved a beginner level in the achievement badges, then the feedback is multiplied with 1.5. This goes on until you reach the advanced level, in which case your feedback will be multiplied by 3 representing very high value. Please note that as opposed to a badge, feedback multiplier is not “collected” but is changed to a higher value once you have reached it. </p><p>Additionally, with this factor your votes in the Idea generation contest will be weighted. </p>",
    "lan_help_m4_title": "",
    "lan_help_m4_content":"<p class='popup_title'> Overall View </p> <p><p>In the overall view, you can see your scores in all the nine categories (see table below). The goal is to try to gain an equal amount of points in each of the categories so that you are equally well prepared on all 9 categories. </p><p><img src='img/instructions/c.png' class='instruction_img'></p><p>You can see the scores the community members obtained on average in each of these categories. By toggling the option “show personal” you can display your personal scores that you obtained in each category. </p><p>Additionally, you can see how many people are in your community currently. This information is important to understand the breadth of preparedness of your community. </p>",
    "lan_help_m5_title": "",
    "lan_help_m5_content":"<p class='popup_title'> Achievement Badges  </p> <p>The achievement badges show the overall progress you have made on the platform to prepare yourself for the water issues. </p><p>Once you achieve a “Beginner” level, you become aware of the need to prepare yourself. On the “intermediate” level, you already achieved a certain amount of preparedness. On the “advanced” level you can consider yourself to be fully prepared for the water issues at hand. </p><p>The number of points required to receive each badge are shown as well as your progress towards each of them. </p>",
    "lan_help_m6_title": "",
    "lan_help_m6_content":"<p>Once the progress bar is full, you go to the next level and you fill the bar from the start.</p><p>Show Community displays the level you have already achieved by a colored icon relating to the category where the level has been increased.</p>",
    "lan_power_message_0":"",
    "lan_power_message_1":"Become better prepared for flooding by increasing your impact and preparedness!",
    "lan_power_message_2":"Try hard to become an Advanced Flood Warden!",
    "lan_power_message_3":"",
    "lan_power_message_4":"Help the community become equally prepared for flooding in all the categories."
  },
  "he":{
    "lan_title_personal_preparedness":"מוכנות אישית",
    "lan_title_community_preparedness":"הכנות קהילתית",
    "lan_title_personal_impact": "דוגמא אישית",
    "lan_title_community_impact": "השפעת הקהילה",
    "problem_awareness": "בעיה<br>מודעות",
    "know_how": "בקיאות בנושא",
    "ready_to_act":"מוכנות לפעול בנושא",
    "lan_show_levels":"הצג קהילה",
    "lan_social":"חברתי",
    "lan_political":"פוליטי",
    "lan_individual":"פרטי",
    "title_flood_warden":"",
    "lan_beginner":"מתחיל",
    "lan_itermidiate":"אמצעי",
    "lan_advanced":"מתקדם",
    "lan_boost_factor":"שקלול נקודות",
    "lan_community_preparedness":"מבט כללי",
    "lan_show_personal":"הצג ניקוד אישי",
    "lan_total_points":"ניקוד כולל",
    "lan_impact":"השפעה",
    "lan_spider_ready_to_act": "מוכנות לפעול בנושא",
    "lan_spider_know_how": "בקיאות בנושא",
    "lan_spider_awareness": "בעיה"+"מודעות",
    "lan_spider_goal": "מטרה",
    "lan_community":"קהילתי",
    "lan_personal": "אישי",
    "lan_community_members": "חברים",
    "lan_community_size": "גודל הקהילה",
    "lan_community_size_legend":"Increase in members since Aug 2018: ",
    "lan_community_small": "קטן",
    "lan_community_medium": "בינוני",
    "lan_community_big": "גדול",
    "lan_help_m1_title": "",
    "lan_help_m1_title": "",
    "lan_help_m1_content": "<p class='popup_title'> Personal Preparedness </p> <p>For each activity you do on the platform, you receive points in a variety of categories. Three of these categories relate to personal preparedness: problem awareness, know-how and readiness to act. For example, if you read an article about the risk of flooding - you increase your awareness, whereas if you read about tips how to save water - you get points in readiness to act. </p><p>Further, the preparedness points can be on three different levels; individual, social and political. In order to be prepared for the water issues addressed on the platform, you need to receive points in all of the preparedness categories. </p><p>The visualization graphically displays the sum of points you achieved in the preparedness categories (see the red box in the image below). </p><p><img src='img/instructions/a.png' class='instruction_img'></p> <p>In this view, you can also switch to <b>“Community preparedness”</b> and see the scores that the members of the community achieved on average in the summatory preparedness categories: problem awareness, know-how and ready to act. </p>",
    "lan_help_m2_title": "",
    "lan_help_m2_content": "<p class='popup_title'> Personal Impact </p>  <p>Personal impact shows how the actions you do on the platform can have impact on individual, social and political levels.  For example, if you share a certain issue about water with others, it also has social impact. If you attend a water-related event, you show your political participation. </p><p>Further, the personal impact can be on different levels: problem awareness, know-how and readiness to act. In order to be prepared for the water issues, you need to receive points in all the impact categories. </p><p>This visualization graphically displays the sum of points you achieved in each of the impact categories (see red box in the image below). </p><p><img src='img/instructions/b.png' class='instruction_img'></p><p>In this view, you can also switch to <b>“Community impact”</b> and see the scores that the members of the community achieved on average in the summatory impact categories: individual, social and political impact. </p>",
    "lan_help_m3_title": "",
    "lan_help_m3_content":"<p class='popup_title'> Feedback multiplier  </p> <p>Feedback multiplier reflects the value of feedback you give to others on the platform. The more you engage on the platform, and the higher your score is, the higher is the value of your feedback to others. So, anytime you like or comment on the platform, your feedback will be multiplied by a certain factor. </p><p>At the start, all feedback is not multiplied, but once you have earned some points and achieved a beginner level in the achievement badges, then the feedback is multiplied with 1.5. This goes on until you reach the advanced level, in which case your feedback will be multiplied by 3 representing very high value. Please note that as opposed to a badge, feedback multiplier is not “collected” but is changed to a higher value once you have reached it. </p><p>Additionally, with this factor your votes in the Idea generation contest will be weighted. </p>",
    "lan_help_m4_title": "",
    "lan_help_m4_content":"<p class='popup_title'> Overall View </p> <p><p>In the overall view, you can see your scores in all the nine categories (see table below). The goal is to try to gain an equal amount of points in each of the categories so that you are equally well prepared on all 9 categories. </p><p><img src='img/instructions/c.png' class='instruction_img'></p><p>You can see the scores the community members obtained on average in each of these categories. By toggling the option “show personal” you can display your personal scores that you obtained in each category. </p><p>Additionally, you can see how many people are in your community currently. This information is important to understand the breadth of preparedness of your community. </p>",
    "lan_help_m5_title": "",
    "lan_help_m5_content":"<p class='popup_title'> Achievement Badges  </p> <p>The achievement badges show the overall progress you have made on the platform to prepare yourself for the water issues. </p><p>Once you achieve a “Beginner” level, you become aware of the need to prepare yourself. On the “intermediate” level, you already achieved a certain amount of preparedness. On the “advanced” level you can consider yourself to be fully prepared for the water issues at hand. </p><p>The number of points required to receive each badge are shown as well as your progress towards each of them. </p>",
    "lan_help_m6_title": "",
    "lan_help_m6_content":"<p>Once the progress bar is full, you go to the next level and you fill the bar from the start.</p><p>Show Community displays the level you have already achieved by a colored icon relating to the category where the level has been increased.</p>",
    "lan_power_message_0":"",
    "lan_power_message_1":"",
    "lan_power_message_2":"",
    "lan_power_message_3":"",
    "lan_power_message_4":""
  },

  "ar":{
    "lan_title_personal_preparedness":"جاهزية شخصية",
    "lan_title_community_preparedness":"التأهب المجتمعي",
    "lan_title_personal_impact": "مثال شخصي",
    "lan_title_community_impact": "تأثير المجتمع",
    "problem_awareness": "مشكلة الوعي",
    "know_how": "المعرفة في الموضوع",
    "ready_to_act":"جاهزية للعمل في المجال",
    "lan_show_levels":"إظهار المجتمع",
    "lan_social":"اجتماعي",
    "lan_political":"سياسي",
    "lan_individual":"شخصي",
    "title_flood_warden":"",
    "lan_beginner":"مبتدأ",
    "lan_itermidiate":"متوسط",
    "lan_advanced":"متقدم",
    "lan_boost_factor":"عامل منح الحافز",
    "lan_community_preparedness":"نظرة شاملة",
    "lan_show_personal":"اعرض النقاط الشخصية",
    "lan_total_points":"نقاط إجمالية:",
    "lan_impact":"جاهزية المجتمع وتأثيره",
    "lan_spider_ready_to_act": "جاهزية للعمل في المجال",
    "lan_spider_know_how":"المعرفة في الموضوع",
    "lan_spider_awareness": "مشكلة الوعي",
    "lan_spider_goal": "الهدف",
    "lan_community":"مجتمعي",
    "lan_personal": "شخصي",
    "lan_community_members": "أفراد",
    "lan_community_size": "حجم المجتمع",
    "lan_community_size_legend":"Increase in members since Aug 2018: ",
    "lan_community_small": "صغير",
    "lan_community_medium": "متوسط",
    "lan_community_big": "كبير",
    "lan_help_m1_title": "",
    "lan_help_m1_content": "<p class='popup_title'> Personal Preparedness </p> <p>For each activity you do on the platform, you receive points in a variety of categories. Three of these categories relate to personal preparedness: problem awareness, know-how and readiness to act. For example, if you read an article about the risk of flooding - you increase your awareness, whereas if you read about tips how to save water - you get points in readiness to act. </p><p>Further, the preparedness points can be on three different levels; individual, social and political. In order to be prepared for the water issues addressed on the platform, you need to receive points in all of the preparedness categories. </p><p>The visualization graphically displays the sum of points you achieved in the preparedness categories (see the red box in the image below). </p><p><img src='img/instructions/a.png' class='instruction_img'></p> <p>In this view, you can also switch to <b>“Community preparedness”</b> and see the scores that the members of the community achieved on average in the summatory preparedness categories: problem awareness, know-how and ready to act. </p>",
    "lan_help_m2_title": "",
    "lan_help_m2_content": "<p class='popup_title'> Personal Impact </p>  <p>Personal impact shows how the actions you do on the platform can have impact on individual, social and political levels.  For example, if you share a certain issue about water with others, it also has social impact. If you attend a water-related event, you show your political participation. </p><p>Further, the personal impact can be on different levels: problem awareness, know-how and readiness to act. In order to be prepared for the water issues, you need to receive points in all the impact categories. </p><p>This visualization graphically displays the sum of points you achieved in each of the impact categories (see red box in the image below). </p><p><img src='img/instructions/b.png' class='instruction_img'></p><p>In this view, you can also switch to <b>“Community impact”</b> and see the scores that the members of the community achieved on average in the summatory impact categories: individual, social and political impact. </p>",
    "lan_help_m3_title": "",
    "lan_help_m3_content":"<p class='popup_title'> Feedback multiplier  </p> <p>Feedback multiplier reflects the value of feedback you give to others on the platform. The more you engage on the platform, and the higher your score is, the higher is the value of your feedback to others. So, anytime you like or comment on the platform, your feedback will be multiplied by a certain factor. </p><p>At the start, all feedback is not multiplied, but once you have earned some points and achieved a beginner level in the achievement badges, then the feedback is multiplied with 1.5. This goes on until you reach the advanced level, in which case your feedback will be multiplied by 3 representing very high value. Please note that as opposed to a badge, feedback multiplier is not “collected” but is changed to a higher value once you have reached it. </p><p>Additionally, with this factor your votes in the Idea generation contest will be weighted. </p>",
    "lan_help_m4_title": "",
    "lan_help_m4_content":"<p class='popup_title'> Overall View </p> <p><p>In the overall view, you can see your scores in all the nine categories (see table below). The goal is to try to gain an equal amount of points in each of the categories so that you are equally well prepared on all 9 categories. </p><p><img src='img/instructions/c.png' class='instruction_img'></p><p>You can see the scores the community members obtained on average in each of these categories. By toggling the option “show personal” you can display your personal scores that you obtained in each category. </p><p>Additionally, you can see how many people are in your community currently. This information is important to understand the breadth of preparedness of your community. </p>",
    "lan_help_m5_title": "",
    "lan_help_m5_content":"<p class='popup_title'> Achievement Badges  </p> <p>The achievement badges show the overall progress you have made on the platform to prepare yourself for the water issues. </p><p>Once you achieve a “Beginner” level, you become aware of the need to prepare yourself. On the “intermediate” level, you already achieved a certain amount of preparedness. On the “advanced” level you can consider yourself to be fully prepared for the water issues at hand. </p><p>The number of points required to receive each badge are shown as well as your progress towards each of them. </p>",
    "lan_help_m6_title": "",
    "lan_help_m6_content":"<p>Once the progress bar is full, you go to the next level and you fill the bar from the start.</p><p>Show Community displays the level you have already achieved by a colored icon relating to the category where the level has been increased.</p>",
    "lan_power_message_0":"",
    "lan_power_message_1":"",
    "lan_power_message_2":"",
    "lan_power_message_3":"",
    "lan_power_message_4":""
}
}
var CURRENT_LAN = "en";
var _CURRENT_CITY = "CI";
function updateCity(){
  document.getElementById("badge_img1").src = "img/badge1_"+_CURRENT_CITY+".png"
  document.getElementById("badge_img2").src = "img/badge2_"+_CURRENT_CITY+".png"
  document.getElementById("badge_img3").src = "img/badge3_"+_CURRENT_CITY+".png"
  if(CURRENT_LAN == "en"){

    switch (_CURRENT_CITY ) {
      case "LE":
        _m1 = "Become better prepared for flooding by increasing your impact and preparedness!";
        _m2 = "Try hard to become an Advanced Flood Warden!";
        _m3 = "Help the community become prepared for flooding!";
        _loc["en"]["lan_power_message_1"] = _m1;
        _loc["en"]["lan_power_message_2"] = _m2;
        _loc["en"]["lan_power_message_4"] = _m3;
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
        break;
      case "MI":
        _m1 = "Become better prepared to save water by increasing your impact and preparedness!";
        _m2 = "Try hard to become an Advanced Water Guardian!";
        _m3 = "Help the community become prepared to save water!";
        _loc["en"]["lan_power_message_1"] = _m1;
        _loc["en"]["lan_power_message_2"] = _m2;
        _loc["en"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "Water Guardian Achievement";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
        break;
      case "SA":
        _m1 = "Become better prepared to reuse water by increasing your impact and preparedness!";
        _m2 = "Try hard to become an Advanced Water Guardian!";
        _m3 = "Help the community increase the use of non-potable water!";
        _loc["en"]["lan_power_message_1"] = _m1;
        _loc["en"]["lan_power_message_2"] = _m2;
        _loc["en"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "Water Guardian Achievement";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
        break;
      case "JE":
        _m1 = "Become better prepared to conserve water by increasing your impact and preparedness!";
        _m2 = "Try hard to become an Advanced Water Guardian!";
        _m3 = "Help the community use water efficiently in the city!";
        _loc["en"]["lan_power_message_1"] = _m1;
        _loc["en"]["lan_power_message_2"] = _m2;
        _loc["en"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "Water Guardian Achievement";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
        break;

      default:

    }



  } else if(CURRENT_LAN == "cat"){

      switch (_CURRENT_CITY ) {
        case "LE":
          _m1 = "Estigués millor preparat per a les inundacions incrementant el teu impacte i preparació!";
          _m2 = "Esforça’t per a convertir en Vigilant d’Inundacions Avançat!";
          _m3 = "Ajuda a la comunitat a estar preparada per a les inundacions!";
          _loc["en"]["lan_power_message_1"] = _m1;
          _loc["en"]["lan_power_message_2"] = _m2;
          _loc["en"]["lan_power_message_4"] = _m3;
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
          break;
        case "MI":
          _m1 = "Estigués millor preparat per a estalviar aigua incrementant el teu impacte i preparació!";
          _m2 = "Esforça’t per a convertir en Guardià d’Aigua Avançat!";
          _m3 = "Ajuda a la comunitat a estar preparada per estalviar aigua!";
          _loc["en"]["lan_power_message_1"] = _m1;
          _loc["en"]["lan_power_message_2"] = _m2;
          _loc["en"]["lan_power_message_4"] = _m3;
          document.getElementById("title_flood_warden").innerHTML = "Guardià d’Aigua Avançat";
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
          break;
        case "SA":
          _m1 = "Estigués millor preparat per a reutilitzar aigua incrementant el teu impacte i preparació!";
          _m2 = "Esforça’t per a convertir en Guardià d’Aigua Avançat!";
          _m3 = "Ajuda a la comunitat a incrementar l’ús d’aigua no potable!";
          _loc["en"]["lan_power_message_1"] = _m1;
          _loc["en"]["lan_power_message_2"] = _m2;
          _loc["en"]["lan_power_message_4"] = _m3;
          document.getElementById("title_flood_warden").innerHTML = "Guardià d’Aigua Avançat";
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
          break;
        case "JE":
          _m1 = "Estigués millor preparat per a conservar aigua incrementant el teu impacte i preparació!";
          _m2 = "Esforça’t per a convertir en Guardià d’Aigua Avançat!";
          _m3 = "Ajuda a la comunitat a incrementar l’ús d’aigua no potable!";
          _loc["en"]["lan_power_message_1"] = _m1;
          _loc["en"]["lan_power_message_2"] = _m2;
          _loc["en"]["lan_power_message_4"] = _m3;
          document.getElementById("title_flood_warden").innerHTML = "Guardià d’Aigua Avançat";
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["en"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["en"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["en"]["lan_power_message_4"];
          break;

        default:

      }



    }

  else if(CURRENT_LAN == "es"){
    switch (_CURRENT_CITY ) {
      case "LE":

        _m1 = "¡Vuélvete mas preparado ante las inundaciones incrementando tu impacto y preparación!";
        _m2 = "¡Esfuerzate para convertirte en un Guardián Avanzado de las inundaciones!";
        _m3 = "¡Ayuda a la comunidad a preparase ante las inundaciones!";
        _loc["es"]["lan_power_message_1"] = _m1;
        _loc["es"]["lan_power_message_2"] = _m2;
        _loc["es"]["lan_power_message_4"] = _m3;
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["es"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["es"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["es"]["lan_power_message_4"];
        break;
      case "MI":
        _m1 = "¡Vuélvete mas preparado ante las inundaciones incrementando tu impacto y preparación!";
        _m2 = "¡Esfuerzate para convertirte en un Guardián Avanzado del agua!";
        _m3 = "¡Ayuda a la comunidad a preparase ante las inundaciones!";
        _loc["es"]["lan_power_message_1"] = _m1;
        _loc["es"]["lan_power_message_2"] = _m2;
        _loc["es"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "Logro de Guardián del Agua";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["es"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["es"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["es"]["lan_power_message_4"];
        break;
      case "SA":

        _m1 = "¡Vuélvete mas preparado para reutilizar el agua incrementando tu impacto y preparación!";
        _m2 = "¡Esfuerzate para convertirte en un Guardián Avanzado del agua!";
        _m3 = "¡Ayuda a la comunidad a incrementer el uso del agua no potable!";
        _loc["es"]["lan_power_message_1"] = _m1;
        _loc["es"]["lan_power_message_2"] = _m2;
        _loc["es"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "Logro de Guardián del Agua";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["es"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["es"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["es"]["lan_power_message_4"];
        break;
      case "JE":
        _m1 = "¡Vuélvete mas preparado para conservar el agua incrementando tu impacto y preparación!";
        _m2 = "¡Esfuerzate para convertirte en un Guardián Avanzado del agua!";
        _m3 = "¡Ayuda a la comunidad a usar el agua eficientemente en la ciudad!";
        _loc["es"]["lan_power_message_1"] = _m1;
        _loc["es"]["lan_power_message_2"] = _m2;
        _loc["es"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "Logro de Guardián del Agua";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["es"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["es"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["es"]["lan_power_message_4"];
        break;

      default:

    }



  }else if(CURRENT_LAN == "he"){
    switch (_CURRENT_CITY ) {
      case "LE":
        _m1 = "";
        _m2 = "";
        _m3 = "";
        _loc["he"]["lan_power_message_1"] = _m1;
        _loc["he"]["lan_power_message_2"] = _m2;
        _loc["he"]["lan_power_message_3"] = _m3;
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["he"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["he"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["he"]["lan_power_message_3"];
        break;
      case "MI":
        _m1 = "";
        _m2 = "התאמץ להפוך ל״שומר מים מתקדם״!";
        _m3 = "";
        _loc["he"]["lan_power_message_1"] = _m1;
        _loc["he"]["lan_power_message_2"] = _m2;
        _loc["he"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "הישגי ״שומר מים״";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["he"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["he"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["he"]["lan_power_message_3"];
        break;
      case "SA":

        _m1 = "";
        _m2 = "התאמץ להפוך ל״שומר מים מתקדם״!";
        _m3 = "";
        _loc["he"]["lan_power_message_1"] = _m1;
        _loc["he"]["lan_power_message_2"] = _m2;
        _loc["he"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "הישגי ״שומר מים״";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["he"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["he"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["he"]["lan_power_message_3"];
        break;
      case "JE":
        _m1 = "הכן עצמך לשימור מים על ידי העלאת ההשפעה שלך ורמת המוכנות שלך!";
        _m2 = "התאמץ להפוך ל״שומר מים מתקדם״!";
        _m3 = "עזור לקהילה להשתמש במים באופן יעיל בעיר!";
        _loc["he"]["lan_power_message_1"] = _m1;
        _loc["he"]["lan_power_message_2"] = _m2;
        _loc["he"]["lan_power_message_4"] = _m3;
        document.getElementById("title_flood_warden").innerHTML = "הישגי ״שומר מים״";
        document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["he"]["lan_power_message_1"];
        document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["he"]["lan_power_message_2"];
        document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["he"]["lan_power_message_4"];
        break;

      default:
    }
    }else if(CURRENT_LAN == "ar"){
      switch (_CURRENT_CITY ) {
        case "LE":
          _m1 = "";
          _m2 = "";
          _m3 = "";
          _loc["he"]["lan_power_message_1"] = _m1;
          _loc["he"]["lan_power_message_2"] = _m2;
          _loc["he"]["lan_power_message_3"] = _m3;
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["ar"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["ar"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["ar"]["lan_power_message_3"];
          break;
        case "MI":
          _m1 = "";
          _m2 = "";
          _m3 = "";
          _loc["he"]["lan_power_message_1"] = _m1;
          _loc["he"]["lan_power_message_2"] = _m2;
          _loc["he"]["lan_power_message_4"] = _m3;
          document.getElementById("title_flood_warden").innerHTML = "";
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["ar"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["ar"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["ar"]["lan_power_message_3"];
          break;
        case "SA":

          _m1 = "";
          _m2 = "";
          _m3 = "";
          _loc["he"]["lan_power_message_1"] = _m1;
          _loc["he"]["lan_power_message_2"] = _m2;
          _loc["he"]["lan_power_message_4"] = _m3;
          document.getElementById("title_flood_warden").innerHTML = "";
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["ar"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["ar"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["ar"]["lan_power_message_3"];
          break;
        case "JE":
          _m1 = "جهز نفسك للحفاظ على المياه بواسطة رفع مدى تأثيرك ومستوى جاهزيتك!";
          _m2 = 'ابذل جهدك لكي تصبح "حارس مياه متقدم"!';
          _m3 = "ساعد المجتمع بالحفاظ على المياه بصورة فعالة في المدينة!";
          _loc["he"]["lan_power_message_1"] = _m1;
          _loc["he"]["lan_power_message_2"] = _m2;
          _loc["he"]["lan_power_message_4"] = _m3;
          document.getElementById("title_flood_warden").innerHTML = 'إنجازات "حارس المياه"';
          document.getElementsByClassName("lan_power_message_1")[0].innerHTML = _loc["ar"]["lan_power_message_1"];
          document.getElementsByClassName("lan_power_message_2")[0].innerHTML = _loc["ar"]["lan_power_message_2"];
          document.getElementsByClassName("lan_power_message_4")[0].innerHTML = _loc["ar"]["lan_power_message_3"];
          break;

        default:

      }



  }

}
function setLan(){
  u    = new URL(window.location);
  _lan = u.searchParams.get("lan");
  _city = u.searchParams.get("city");
  if(_city != null){
    _CURRENT_CITY = _city;
  }
  if(_lan == "he" || _lan == "ar"){
    document.getElementsByTagName("body")[0].setAttribute( "dir","rtl");
    document.getElementById("warden_bar_0").classList.add("warden_bar_0_rtl")
    document.getElementsByClassName("powerBar")[0].classList.add("powerBar_rtl")
    // document.getElementsByClassName("powerBartitle")[0].classList.add("powerBartitle_rtl")
    // document.getElementsByClassName("powerBartitle")[1].classList.add("powerBartitle_rtl")
    // document.getElementsByClassName("powerBartitle")[2].classList.add("powerBartitle_rtl")
    document.getElementsByClassName("powerBar")[1].classList.add("powerBar_rtl")
    document.getElementsByClassName("powerBar")[2].classList.add("powerBar_rtl")
    // x = document.getElementsByClassName("powerBarWrapper")[0];
    // x.appendChild(x.getElementsByClassName("iconWrapper")[0]);
    // x = document.getElementsByClassName("powerBarWrapper")[1];
    // x.appendChild(x.getElementsByClassName("iconWrapper")[0]);
    // x = document.getElementsByClassName("powerBarWrapper")[2];
    // x.appendChild(x.getElementsByClassName("iconWrapper")[0]);
  }
  if(_lan != null){
    CURRENT_LAN = _lan;
    for (k in _loc[CURRENT_LAN]){
      _element = document.getElementById(k);
      if(_element !=null){
          _element.innerHTML = _loc[CURRENT_LAN][k];
      }
      lan_classes = document.getElementsByClassName(k);
      for (var i = 0; i < lan_classes.length; i++) {
        lan_classes[i].innerHTML = _loc[CURRENT_LAN][k];
      }
    }
  }
  updateCity();


}
setLan();
var circle = document.getElementById("circ_1");
var radius = circle.r.baseVal.value;
var circumference = radius * 2 * Math.PI;

var circle2 = document.getElementById("circ_2");
var radius2 = circle.r.baseVal.value;
var circumference2 = radius2 * 2 * Math.PI;

var circle3 = document.getElementById("circ_3");
var radius3 = circle.r.baseVal.value;
var circumference3 = radius3 * 2 * Math.PI;

circle.style.strokeDasharray = `${circumference} ${circumference}`;
circle.style.strokeDashoffset = `${circumference}`;
circle2.style.strokeDasharray = `${circumference} ${circumference}`;
circle2.style.strokeDashoffset = `${circumference}`;
circle3.style.strokeDasharray = `${circumference} ${circumference}`;
circle3.style.strokeDashoffset = `${circumference}`;


function setProgress(percent) {
  const offset = circumference - percent / 100 * circumference;
  circle.style.strokeDashoffset = offset;
}

const input = document.getElementById('input1');

function setProgress2(percent) {
  const offset2 = circumference2 - percent / 100 * circumference2;
  circle2.style.strokeDashoffset = offset2;
}

const input2 = document.getElementById('input2');
/*setProgress2(input2.value);

input2.addEventListener('change', function(e) {
  if (input2.value < 101 && input2.value > -1) {
    setProgress2(input2.value);
  }
})*/

// 3


function setProgress3(percent) {
  const offset3 = circumference3 - percent / 100 * circumference3;
  circle3.style.strokeDashoffset = offset3;
}

const input3 = document.getElementById('input3');
/*setProgress3(input3.value);

input3.addEventListener('change', function(e) {
  if (input3.value < 101 && input3.value > -1) {
    setProgress3(input3.value);
  }
})*/
function setPAPoints(p){
  document.getElementById("pa_points").innerHTML = numberWithCommas(Math.round(p));
}
function setKHPoints(p){
  document.getElementById("kh_points").innerHTML = numberWithCommas(Math.round(p));
}
function setRAPoints(p){
  document.getElementById("ra_points").innerHTML = numberWithCommas(Math.round(p));
}
function setGPAPoints(p){

  document.getElementById("pag_points").innerHTML = numberWithCommas(Math.round(p));
}
function setGKHPoints(p){
  document.getElementById("khg_points").innerHTML = numberWithCommas(Math.round(p));
}
function setGRAPoints(p){
  document.getElementById("rag_points").innerHTML = numberWithCommas(Math.round(p));
}
function setg_pa(p){
  document.getElementById("g_pa").innerHTML = "/ "+numberWithCommas(Math.round(p));
}
function setg_so(p){
  document.getElementById("g_so").innerHTML = "/ "+numberWithCommas(Math.round(p));
}
function setg_in(p){
  document.getElementById("g_in").innerHTML = "/ "+numberWithCommas(Math.round(p));
}
function changeProgress(la,lb,lc){
  var _MAX_POINTS_LEVEL = 1000;
  lra = la - (Math.floor( la / _MAX_POINTS_LEVEL) * _MAX_POINTS_LEVEL) ;
  lrb = lb - (Math.floor( lb / _MAX_POINTS_LEVEL) * _MAX_POINTS_LEVEL) ;
  lrc = lc - (Math.floor( lc / _MAX_POINTS_LEVEL) * _MAX_POINTS_LEVEL) ;

  setPAPoints(la);
  setKHPoints(lb);
  setRAPoints(lc);

  _lp1 = lra * 100 / _MAX_POINTS_LEVEL;
  _lp2 = lrb * 100 / _MAX_POINTS_LEVEL;
  _lp3 = lrc * 100 / _MAX_POINTS_LEVEL;
  setProgress(_lp1);
  setProgress2(_lp2);
  setProgress3(_lp3);

  addCircularLevelsPA(la);
  addCircularLevelsKH(lb);
  addCircularLevelsRA(lc);

}
function addCircularLevelsPA(l){
  _earned  = '<img src="img/circ_talk.png" class="iconsmall"/>'
  _nearned ='<img src="img/circ_talk_gray.png" class="iconsmall"/>'
  if(l >= 3000){
    _badges = _earned  + _earned + _earned;
  }else if( (l <= 2999) && (l >= 2000) ){
    _badges = _earned  + _earned + _nearned;
  }else if( (l <= 2999) && (l >= 1000) ){
    _badges = _earned  + _nearned + _nearned;
  }else{
    _badges = _nearned  + _nearned + _nearned;
  }
  document.getElementById("circularLevels1").innerHTML = _badges

}
function addCircularLevelsKH(l){
  _earned  = '<img src="img/circ_idea.png" class="iconsmall"/>'
  _nearned ='<img src="img/circ_idea_gray.png" class="iconsmall"/>'
  if(l >= 3000){
    _badges = _earned  + _earned + _earned;
  }else if( (l <= 2999) && (l >= 2000) ){
    _badges = _earned  + _earned + _nearned;
  }else if( (l <= 2999) && (l >= 1000) ){
    _badges = _earned  + _nearned + _nearned;
  }else{
    _badges = _nearned  + _nearned + _nearned;
  }
  document.getElementById("circularLevels2").innerHTML = _badges
}
function addCircularLevelsRA(l){
  _earned  = '<img src="img/circ_stopwatch.png" class="iconsmall"/>'
  _nearned ='<img src="img/circ_stopwatch_gray.png" class="iconsmall"/>'
  if(l >= 3000){
    _badges = _earned  + _earned + _earned;
  }else if( (l <= 2999) && (l >= 2000) ){
    _badges = _earned  + _earned + _nearned;
  }else if( (l <= 2999) && (l >= 1000) ){
    _badges = _earned  + _nearned + _nearned;
  }else{
    _badges = _nearned  + _nearned + _nearned;
  }
  document.getElementById("circularLevels3").innerHTML = _badges
}
// setTimeout(function(){ changeProgress() }, 1000);
function setProgressPowerBar(p,n){
  _MAX_POINTS_LEVEL = 4000;
  lrp = p - (Math.floor( p / _MAX_POINTS_LEVEL) * _MAX_POINTS_LEVEL) ;
  p = lrp * 100 / _MAX_POINTS_LEVEL;

  _pbar = document.getElementById("powerBar"+n);
  _pbar.style.width = p + "%";
}
function addPowerBarLevelsPA(l,m){
  _earned  = '<img src="img/political.png" class="iconsmall"/>'
  _nearned ='<img src="img/political_gray.png" class="iconsmall"/>'
  if(l >= 3000){
    _badges = _earned  + _earned + _earned;
  }else if( (l <= 2999) && (l >= 2000) ){
    _badges = _earned  + _earned + _nearned;
  }else if( (l <= 2999) && (l >= 1000) ){
    _badges = _earned  + _nearned + _nearned;
  }else{
    _badges = _nearned  + _nearned + _nearned;
  }
  ll = numberWithCommas(Math.round(l));
  mm = numberWithCommas(Math.round(m));

  document.getElementById("bar_title_score_PA").innerHTML = ll ;
  document.getElementById("bar_title_score_PA_g").innerHTML = mm ;
  document.getElementById("powerBarLevels1").innerHTML = _badges;
}
function addPowerBarLevelsSO(l,m){
  _earned  = '<img src="img/users-group.png" class="iconsmall"/>'
  _nearned ='<img src="img/users-group_gray.png" class="iconsmall"/>'
  if(l >= 3000){
    _badges = _earned  + _earned + _earned;
  }else if( (l <= 2999) && (l >= 2000) ){
    _badges = _earned  + _earned + _nearned;
  }else if( (l <= 2999) && (l >= 1000) ){
    _badges = _earned  + _nearned + _nearned;
  }else{
    _badges = _nearned  + _nearned + _nearned;
  }
  ll = numberWithCommas(Math.round(l));
  mm = numberWithCommas(Math.round(m));
  document.getElementById("bar_title_score_SO").innerHTML = ll ;
  document.getElementById("bar_title_score_SO_g").innerHTML = mm ;

  document.getElementById("powerBarLevels2").innerHTML = _badges
}
function addPowerBarLevelsIN(l,m){
  _earned  = '<img src="img/people.png" class="iconsmall"/>'
  _nearned ='<img src="img/people_gray.png" class="iconsmall"/>'
  if(l >= 3000){
    _badges = _earned  + _earned + _earned;
  }else if( (l <= 2999) && (l >= 2000) ){
    _badges = _earned  + _earned + _nearned;
  }else if( (l <= 2999) && (l >= 1000) ){
    _badges = _earned  + _nearned + _nearned;
  }else{
    _badges = _nearned  + _nearned + _nearned;
  }
  ll = numberWithCommas(Math.round(l));
  mm = numberWithCommas(Math.round(m));
  document.getElementById("bar_title_score_IN").innerHTML = ll ;
  document.getElementById("bar_title_score_IN_g").innerHTML = mm ;
  document.getElementById("powerBarLevels3").innerHTML = _badges
}
const numberWithCommas = (x) => {
  return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}
function setWardenProgress(n){

  var WARDEN_LVL_0 =  500;
  var WARDEN_LVL_1 =  5000;
  var WARDEN_LVL_2 = 9000;

  _w1 = n * 100 / WARDEN_LVL_0;
  _w2 = (n - WARDEN_LVL_0) * 100 / (WARDEN_LVL_1 - WARDEN_LVL_0);
  _w3 = (n - WARDEN_LVL_1) * 100 / (WARDEN_LVL_2 - WARDEN_LVL_1);
  // set bar fills
  document.getElementById("warden_bar0_fill").style.width = _w1 + "%"
  document.getElementById("warden_bar1_fill").style.width = _w2 + "%"
  document.getElementById("warden_bar2_fill").style.width = _w3 + "%"

  // set badges
  document.getElementById("badge1").classList.remove("earned")
  document.getElementById("badge2").classList.remove("earned")
  document.getElementById("badge3").classList.remove("earned")
  if(n >= WARDEN_LVL_0){
    document.getElementById("badge1").classList.add("earned")
    document.getElementById("badge_img1").src = "img/badge1_"+_CURRENT_CITY+"_earned.png";
    document.getElementsByClassName("boost_factor 1")[0].classList.remove("boost_factor_earned");
    document.getElementsByClassName("boost_factor 2")[0].classList.remove("boost_factor_earned");
    document.getElementsByClassName("boost_factor 3")[0].classList.remove("boost_factor_earned");

    document.getElementsByClassName("boost_factor 1")[0].classList.add("boost_factor_earned");

  }
  if(n >= WARDEN_LVL_1){
    document.getElementById("badge_img2").src = "img/badge2_"+_CURRENT_CITY+"_earned.png";
    document.getElementById("badge2").classList.add("earned")
    document.getElementsByClassName("boost_factor 1")[0].classList.remove("boost_factor_earned");
    document.getElementsByClassName("boost_factor 2")[0].classList.remove("boost_factor_earned");
    document.getElementsByClassName("boost_factor 3")[0].classList.remove("boost_factor_earned");

    document.getElementsByClassName("boost_factor 2")[0].classList.add("boost_factor_earned");

  }
  if(n >= WARDEN_LVL_2){
    document.getElementById("badge_img3").src = "img/badge3_"+_CURRENT_CITY+"_earned.png";
    document.getElementById("badge3").classList.add("earned")
    document.getElementsByClassName("boost_factor 1")[0].classList.remove("boost_factor_earned");
    document.getElementsByClassName("boost_factor 2")[0].classList.remove("boost_factor_earned");
    document.getElementsByClassName("boost_factor 3")[0].classList.remove("boost_factor_earned");

    document.getElementsByClassName("boost_factor 3")[0].classList.add("boost_factor_earned");

  }


  // if(p < 100){
  //   // set only level 1, disable all the rest
  //   document.getElementById("warden_bar1_fill").style.width = p + "%"
  //   document.getElementById("warden_bar2_fill").style.width = "0%"
  //   document.getElementById("badge2").classList.remove("earned")
  //   document.getElementById("badge3").classList.remove("earned")
  //   document.getElementById("badge_img2").src = "img/badge2.png";
  //   document.getElementById("badge_img3").src = "img/badge3.png";
  //
  // }else{
  //   document.getElementById("warden_bar1_fill").style.width = "100%"
  //   document.getElementById("warden_bar2_fill").style.width = (Math.abs(100 - p) + "%");
  //   document.getElementById("badge2").classList.add("earned")
  //   document.getElementById("badge_img2").src = "img/badge2_earned.png";
  //   document.getElementById("badge_img3").src = "img/badge3.png";
  //   document.getElementById("badge3").classList.remove("earned")
  //
  //
  //   if(p >= 200){
  //     document.getElementById("badge3").classList.add("earned")
  //     document.getElementById("badge_img3").src = "img/badge3_earned.png";
  //   }
  // }
}
function canvas_arrow(context, fromx, fromy, tox, toy,i){
    context.globalCompositeOperation = "destination-over";
    _or = context.fillStyle;

    var headlen = 10;   // length of head in pixels
    var angle = Math.atan2(toy-fromy,tox-fromx);
    _strokeStyle = ""
    if(i <=2){
      _strokeStyle = "#13377f"
    }else if(i <=5){
      _strokeStyle = "#6a67ce"
    }else{
      _strokeStyle = "#6d0949"

    }
    context.beginPath();
    context.strokeStyle = _strokeStyle;
    context.moveTo(fromx, fromy);
    context.lineTo(tox, toy);
    context.closePath();
    context.stroke();



    context.moveTo(tox, toy);
    _arlx = tox-headlen*Math.cos(angle-Math.PI/6);
    _arly = toy-headlen*Math.sin(angle-Math.PI/6);
    _arrx = tox-headlen*Math.cos(angle+Math.PI/6);
    _arry = toy-headlen*Math.sin(angle+Math.PI/6);
    context.lineTo(_arlx,_arly);
    // context.moveTo(tox, toy);
    context.lineTo(_arrx,_arry);
    // context.moveTo(_arlx, _arly);
    context.lineTo(_arrx,_arry);
    context.fillStyle = _strokeStyle;

    context.stroke();

    context.fill();
    context.fillStyle = _or;
    context.globalCompositeOperation = "source-over";

}
function initSpider(){
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  c = canvas.height * .50;
  canvas.width = canvas.parentElement.offsetWidth;
  canvas.height = canvas.parentElement.offsetHeight;
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  centerX = sizeWidth/2;
  centerY = sizeHeight/2;
  r = sizeWidth *.30;
  if(sizeWidth >= sizeHeight){
    r = sizeHeight *.30;
  }
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.beginPath();
  // console.log(sizeWidth/2);
  // console.log(sizeHeight/2);
  ctx.beginPath();
  ctx.arc(centerX,centerY,1,0,2*Math.PI)
  ctx.strokeStyle = '#d7dadd';
  _goals  = [0,3,6]
  // draw 10 lines, all with the same distance between each other
  for (var i = 0; i < 12; i++) {
    if(i == 0){
      ctx.setLineDash([5, 15]);
      ctx.strokeStyle = '#737373';
      ctx.lineWidth   = 1;

    }else if(i == 1){
      ctx.setLineDash([]);
      ctx.strokeStyle = '#737373';
      ctx.lineWidth   = 2;

    }
    else{
      ctx.setLineDash([]);
      ctx.strokeStyle = '#d7dadd';
      ctx.lineWidth   = 1;

    }
    ctx.beginPath();
    ctx.arc(centerX,centerY, r - ( i *  r / 11 ) ,0,2*Math.PI)
    ctx.stroke();


  }

  _degrees = [0,40,80,120,160,200,240,280,320];

  _labels  = [
                _loc[CURRENT_LAN].lan_individual,
                _loc[CURRENT_LAN].lan_social,
                _loc[CURRENT_LAN].lan_political,
                _loc[CURRENT_LAN].lan_individual,
                _loc[CURRENT_LAN].lan_social,
                _loc[CURRENT_LAN].lan_political,
                _loc[CURRENT_LAN].lan_individual,
                _loc[CURRENT_LAN].lan_social,
                _loc[CURRENT_LAN].lan_political,
              ];
  _categories = ["Social","Social","Social","Political","Political","Political","Individual","Individual","Individual"]
  _categoriesIndexes = [1,4,7]
  _offset = 10; //All lines will be turned with this offset.
  _extraRadius = 20;
  ctx.lineWidth   = 1;

  _labelColors = ["#13377f","#6a67ce","#6d0949"]

  _degrees.forEach(function(d,i){
    // ctx.beginPath();
    // ctx.moveTo(centerX ,centerY);
    // convert angles to radians. Add offset
    rx = (d + _offset)  * (Math.PI /180);
    ry = (d + _offset) * (Math.PI /180);
    x = centerX + (r * 1.1) * Math.cos(rx);
    y = centerY + (r * 1.1) * Math.sin(ry);
    var headlen = 10;
    var angle = Math.atan2(y-centerX,x-centerY);
    // ctx.lineTo(x,y);
    canvas_arrow(ctx,centerX,centerY,x,y,i)
    // ctx.lineTo(x-headlen*Math.cos(angle-Math.PI/6),y-headlen*Math.sin(angle-Math.PI/6));
    // ctx.moveTo(x, x);
    // ctx.lineTo(x-headlen*Math.cos(angle+Math.PI/6),u-headlen*Math.sin(angle+Math.PI/6));
    if(sizeWidth <  620){
      ctx.font = "10px Arial";

    }else{
      ctx.font = "11px Arial";

    }
    rx = (d + _offset)  * (Math.PI /180);
    ry = (d + _offset) * (Math.PI /180);
    x = centerX + r*1.17  * Math.cos(rx);
    y = centerY + r*1.17 * Math.sin(ry);

    if(i < 2 ){
      ctx.fillStyle = _labelColors[0];
    }else if(i > 2 && i < 5){
      ctx.fillStyle = _labelColors[1];
    }else if(i > 5){
      ctx.fillStyle = _labelColors[2];
    }else if(i >= _degrees.length -1){
      ctx.fillStyle = _labelColors[0];
    }
    switch (i) {
      case 0:
      case 1:
      case 8:
        ctx.textAlign="left";
      break;
      case 2:
      case 6:
      case 7:
          ctx.textAlign="center";
      break;
      case 3:
      case 4:
      case 5:
        ctx.textAlign="right";
      break;
      default:
        ctx.textAlign="center";

    }
    ctx.beginPath();
    ctx.fillText(_labels[i],x,y);
    ctx.stroke();
    ctx.closePath();
    if(_categoriesIndexes.includes(i) && sizeWidth > 620  ){

      rx = (d + _offset)  * (Math.PI /180);
      ry = (d + _offset) * (Math.PI /180);
      x = centerX +r*1.51 * Math.cos(rx);
      y = centerY +r*1.51 * Math.sin(ry);

      ctx.font = "bold 15px Arial";
      ctx.beginPath();
      switch (i) {
        case 1:
        ctx.textAlign="left";

        ctx.fillText(_loc[CURRENT_LAN].lan_spider_know_how,x,y);
        break;
        case 4:
        ctx.fillText(_loc[CURRENT_LAN].lan_spider_ready_to_act,x,y);

        ctx.textAlign="right";
        break;
        case 7:
        ctx.fillText(_loc[CURRENT_LAN].lan_spider_awareness,x,y);

        ctx.textAlign="left";
        break;
        default:

      }
      // ctx.fillText(_categories[i],x,y);
      ctx.stroke();
      ctx.closePath();
    }
    ctx.font = "12px Arial";


  });


  ctx.closePath();

}
function addSize(size){
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;

  marginRight = 10;
  ctx.font = "13px Arial";
  ctx.beginPath();
  ctx.lineWidth   = 2;
  ctx.strokeStyle = '#848177';
  ctx.moveTo(0,0);
  ctx.fillStyle   = "#848177";
  if(size <= 20){
    _size  = _loc[CURRENT_LAN].lan_community_small;
  }else if((size >= 20) && (size <= 50)){
    _size  = _loc[CURRENT_LAN].lan_community_medium;
  }else{
    _size  = _loc[CURRENT_LAN].lan_community_big;
  }
  ctx.strokeStyle = '#265380';
  ctx.fillStyle   = "#09244c";
  ctx.font = "bold 16px Arial";
  _max_pop = 2000;
  _aug = 0;
  if( _CURRENT_CITY  == "LE" ){
    _max_pop = 3000;
    _aug = 60;

  }else if (_CURRENT_CITY  == "MI"){
    _aug = 55;
  }else if (_CURRENT_CITY  == "SA"){
    _aug = 39;
  }else if (_CURRENT_CITY  == "JE"){
    _aug = 57;
  }
  if(sizeWidth > 500){
    _barSize = (sizeWidth / 3);
    _barY1   = 500;
    _barY2   = _barY1 + 20;
    __l1      = (_barSize / 2 );
    __l2      = (_barSize / 4 );
    ctx.textAlign   = "left";
    ctx.fillText(_loc[CURRENT_LAN].lan_community_size,0 ,480);
    ctx.textAlign   = "center";
    ctx.fillText("75%",__l1 + __l2 ,540);
    ctx.fillText("25%",__l2 ,540);
    ctx.fillText("50%",__l1 ,540);
    ctx.textAlign   = "start";
    ctx.fillText(_max_pop,_barSize ,505);
    ctx.fillText(_loc[CURRENT_LAN].lan_community_members,_barSize ,525);
    _increaseLeyend = _loc[CURRENT_LAN].lan_community_size_legend + numberWithCommas((size).toFixed(0)) + "%";
    ctx.fillText(_increaseLeyend,0,570);

    ctx.stroke();
  }else{
    _barSize = (sizeWidth - 70);
    _barY1   = 500;
    _barY2   = _barY1 + 20;
    __l1      = (_barSize / 2 );
    __l2      = (_barSize / 4 );
    ctx.textAlign   = "left";
    ctx.fillText(_loc[CURRENT_LAN].lan_community_size,0 ,480);
    ctx.textAlign   = "center";
    ctx.fillText("75%",__l1 + __l2 ,540);
    ctx.fillText("25%",__l2 ,540);
    ctx.fillText("50%",__l1 ,540);
    ctx.textAlign   = "start";
    ctx.fillText(_max_pop,_barSize ,505);
    ctx.fillText(_loc[CURRENT_LAN].lan_community_members,_barSize ,525);
    _increaseLeyend = _loc[CURRENT_LAN].lan_community_size_legend + numberWithCommas((size).toFixed(2));
    ctx.fillText(_increaseLeyend,0,570);

    ctx.stroke();
  }




  _fillBarcolor = "#4382b5";
  ctx.fillStyle   = _fillBarcolor;

  _barWidth = _barSize ;
  // fill
  ctx.beginPath();
  _MAX_SIZE = 2000;
  if(size >= _MAX_SIZE){
    size  = _MAX_SIZE
  }
  _sP =  (size/_max_pop) * 1;

  ctx.fillRect(0,_barY1,_barWidth * _sP ,20);
  ctx.closePath();
  ctx.fillStyle   = "#09244c";

  //left
  ctx.beginPath();
  ctx.moveTo(0,_barY1);
  ctx.lineTo(0,_barY2);
  ctx.closePath();
  ctx.stroke();
  //top
  ctx.beginPath();
  ctx.moveTo(0,_barY1);
  ctx.lineTo(_barSize - marginRight,_barY1);
  ctx.closePath();
  ctx.stroke();
  //bottom
  ctx.beginPath();
  ctx.moveTo(0,_barY2);
  ctx.lineTo(_barSize - marginRight,_barY2);
  ctx.closePath();
  ctx.stroke();
  //right
  ctx.beginPath();
  ctx.moveTo(_barSize - marginRight,_barY1);
  ctx.lineTo(_barSize - marginRight,_barY2);
  ctx.closePath();
  ctx.stroke();
  //l0
  ctx.beginPath();
  ctx.moveTo(__l1 + __l2,_barY1 + 15);
  ctx.lineTo(__l1 + __l2,_barY1 + 25);
  ctx.closePath();
  ctx.stroke();
  //l1
  ctx.beginPath();
  ctx.moveTo(__l1,_barY1 + 15);
  ctx.lineTo(__l1,_barY1 + 25);
  ctx.closePath();
  ctx.stroke();
  //l2
  ctx.beginPath();
  ctx.moveTo(__l2,_barY1 + 15);
  ctx.lineTo(__l2,_barY1 + 25);
  ctx.closePath();
  ctx.stroke();

}
function addImpact(){
  marginLeft = 10;
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  _labelColors = ["#1786e0","#2dc463","#e23d3d",]
  if(sizeWidth <  620){
    ctx.font = "bold 13px Arial";
  }else{
    ctx.font = "bold 16px Arial";


  }

  ctx.beginPath();
  ctx.lineWidth   = 2;
  ctx.fillStyle = 'black';
  ctx.textAlign   = "left";
  ctx.fillText(_loc[CURRENT_LAN].lan_impact,marginLeft + 20,sizeHeight - 125);
  ctx.fillText(_loc[CURRENT_LAN].lan_individual,marginLeft + 20,sizeHeight - 100);
  ctx.fillText(_loc[CURRENT_LAN].lan_social,marginLeft + 20,sizeHeight - 75);
  ctx.fillText(_loc[CURRENT_LAN].lan_political,marginLeft + 20,sizeHeight - 50);
  ctx.closePath();

  ctx.beginPath();
  ctx.fillStyle   = _labelColors[0];
  ctx.arc( marginLeft + 10,sizeHeight - 105,4,0,2*Math.PI)
  ctx.fill();
  ctx.closePath();

  ctx.beginPath();
  ctx.fillStyle   = _labelColors[1];
  ctx.arc( marginLeft + 10,sizeHeight - 80,4,0,2*Math.PI)
  ctx.fill();
  ctx.closePath();

  ctx.beginPath();
  ctx.fillStyle   = _labelColors[2];
  ctx.arc( marginLeft + 10,sizeHeight - 55,4,0,2*Math.PI)
  ctx.fill();
  ctx.closePath();




}
function addGraphGoal(){
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;

  var img = new Image();   // Create new img element
  _imgHeight = 150;
  _imgWidth =  _imgHeight * 1.11;
  if(sizeWidth > 500){
    img.addEventListener('load', function() {
      // execute drawImage statements here
        ctx.drawImage(img, sizeWidth - _imgHeight, 0,_imgWidth,_imgHeight);

    }, false);
    ctx.fillStyle = "black";
    ctx.textAlign = "left";
    ctx.fillText(_loc[CURRENT_LAN].lan_spider_goal,sizeWidth - (_imgWidth / 2),_imgHeight + 20);

    img.src = 'img/goals.png'; // Set source path
  }

}
function addGoals(){
  _degrees = [0,20,30,60,160,200,240,280,320,360];
  _offset = 10; //All lines will be turned with this offset.
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  values = [4,7,10]
  if(sizeWidth <  620){
    _labels = ["Very well prepared", "Quite prepared","A bit prepard"]
    _marginRightA = 30;
    _marginRightB = 30;
    _marginRightC = 25;
    ctx.font = "11px Arial";

  }else{
    _labels = ["Very well prepared", "Quite prepared","A bit prepared"]

    _marginRightA = 45;
    _marginRightB = 110;
    _marginRightC = 110;
    ctx.font = "13px Arial";

  }

  values.forEach(function(v,i){
    vi = Math.abs(v - _degrees.length);
    _rd  = r - ( vi  *  r / 10 ) //radius distance
    // convert angles to radians. Add offset
    // convert angles to radians. Add offset
    rx = (_degrees[0+i] + _offset)  * (Math.PI /180);
    ry = (_degrees[0+i] + _offset) * (Math.PI /180);
    x = centerX + _rd * Math.cos(rx);
    y = centerY + _rd * Math.sin(ry);
    ctx.beginPath();
    ctx.lineWidth   = 2;
    ctx.strokeStyle = '#848177';
    // ctx.moveTo(x,y);
    ctx.fillStyle   = "#848177";

    if(sizeWidth <  620){
      ctx.lineTo(x,sizeHeight - (10 * i) - 60);
      ctx.textAlign="left";
      if( v == 4){
        ctx.fillText("Goals",x,sizeHeight - 40);
      }
      if(v == 10){
        ctx.fillText(_labels[i],x , sizeHeight - 70);
      }else if(v == 7){
        ctx.fillText(_labels[i],x , sizeHeight - 60 );
      }else{
        ctx.fillText(_labels[i],x , sizeHeight - 50 );

      }
    }else{
      ctx.lineTo(sizeWidth,y)
      // _labels[i]
      ctx.textAlign="right";
      if( v == 4){
        ctx.fillText("Goals",sizeWidth - 10,y-15);
      }
      if(v == 10){
        ctx.fillText(_labels[i],sizeWidth - 10,y+15);
      }else{
        ctx.fillText(_labels[i],sizeWidth - 10,y+15);
      }
    }

    ctx.stroke();
  });
}
function addLeyend(show_personal){
  marginLeft = 10;
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  ctx.strokeStyle = '#293b47'; //black
  ctx.lineWidth   = 2;
  ctx.beginPath();
  if(sizeWidth <  620){
    _ln  = sizeWidth * .3;

  }else{
    _ln  = sizeWidth * .1;

  }

  marginRight = 0;
  ctx.setLineDash([0]);
  ctx.moveTo(marginLeft,100);
  ctx.lineTo(_ln,100);

  ctx.stroke();
  ctx.closePath();
  ctx.beginPath();
  ctx.font = "bold 16px Arial";
  ctx.fillStyle = '#293b47'; //black
  ctx.textAlign = "left";

  ctx.fillText(_loc[CURRENT_LAN].lan_community,marginLeft,120);
  ctx.font = "13px Arial";
  ctx.closePath();

  if(show_personal){
    ctx.beginPath();
    ctx.font = "bold 16px Arial";
    ctx.fillStyle = '#293b47'; //black
    ctx.fillText(_loc[CURRENT_LAN].lan_personal,marginLeft ,70);
    ctx.font = "13px Arial";
    ctx.closePath();
    ctx.beginPath();
    ctx.setLineDash([3]);
    ctx.stroke();
    ctx.strokeStyle = 'black'; //black
  }


  if(show_personal){
    ctx.moveTo(marginLeft,50);
    ctx.lineTo(_ln,50);
    ctx.closePath();
    ctx.stroke();
  }

  _labelColors = ["#13377f", "#6a67ce","#6d0949"]

  _labelColors.forEach(function(l,i){
    ctx.strokeStyle = '#293b47'; //black
    ctx.setLineDash([0]);
    ctx.beginPath();
    ctx.fillStyle = l;
    ctx.arc(marginLeft + _ln * (i / 3) + (_ln / 6) ,100,5,0,2*Math.PI)

    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    if(show_personal){
      ctx.strokeStyle = '#black'; //black
      ctx.setLineDash([3]);
      ctx.beginPath();
      ctx.fillStyle = l;
      ctx.arc( marginLeft + _ln * (i / 3) + (_ln / 6) ,50,5,0,2*Math.PI)

      ctx.closePath();
      ctx.fill();
      ctx.stroke();
    }

  });


}
function addLeyendR(){
  marginRight = 10;
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  ctx.strokeStyle = '#293b47'; //black
  ctx.lineWidth   = 2;
  ctx.beginPath();
  if(sizeWidth <  500){
    _labelColors = ["#13377f", "#6a67ce","#6d0949"]
    _labels = [
                _loc[CURRENT_LAN].lan_spider_awareness,
                _loc[CURRENT_LAN].lan_spider_ready_to_act,
                _loc[CURRENT_LAN].lan_spider_know_how
              ]

     ctx.font = "bold 12px Arial";

    _labelColors.forEach(function(l,i){
      ctx.strokeStyle = '#293b47'; //black
      ctx.beginPath();
      ctx.fillStyle = l;
      ctx.arc(sizeWidth - marginRight - 100 ,50 + (20*i),5,0,2*Math.PI)
      ctx.fillText(_labels[i],sizeWidth - marginRight - 90 ,50 + (23*i));
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
    });

  }else{
  }



}
function addPolygons(values,dashed){
  _MAX_POLIGON_VALUE = 1000;
  _EVENT_HORIZONT    = 1000000;

  _nvalues = [];
  values.forEach(function(v){
    if(v > _MAX_POLIGON_VALUE){
      if(v > _EVENT_HORIZONT){
        v = _EVENT_HORIZONT;
      }
      _nv = v / _EVENT_HORIZONT + 9;
    }else {
      _nv = v * 9 / _MAX_POLIGON_VALUE;
    }
    _nvalues.push(_nv);
  })
  values = _nvalues;
  _degrees = [0,40,80,120,160,200,240,280,320,360];
  _offset = 10; //All lines will be turned with this offset.
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;

  c = canvas.height * .10;


  centerX = sizeWidth/2;
  centerY = sizeHeight/2;
  r = sizeWidth *.30;
  if(sizeWidth >= sizeHeight){
    r = sizeHeight *.30;
  }

  ctx.lineWidth   = 1.5;
  ctx.strokeStyle = '#293b47';
  ctx.beginPath();

  if(dashed){
    ctx.setLineDash([1]);
    ctx.strokeStyle = '#293b47';
  }
  values.forEach(function(v,i){
    vi = Math.abs(v - _degrees.length);
    _rd  = r - ( vi  *  r / 10 ) //radius distance
    // convert angles to radians. Add offset
    // convert angles to radians. Add offset
    rx = (_degrees[i] + _offset)  * (Math.PI /180);
    ry = (_degrees[i] + _offset) * (Math.PI /180);
    x = centerX + _rd * Math.cos(rx);
    y = centerY + _rd * Math.sin(ry);
    ctx.lineTo(x,y);
    if(dashed){
      ctx.setLineDash([3]);
    }
    ctx.moveTo(x,y);

  });
  ctx.closePath();
  ctx.stroke();
  if(dashed){
    ctx.setLineDash([3]);
  }
  ctx.fillStyle="#1786e0";
  ctx.fillStyle="#e23d3d";
  ctx.fillStyle="#2dc463";
  values.forEach(function(v,i){
    vi = Math.abs(v - _degrees.length);
    _rd  = r - ( vi  *  r / 10 ) //radius distance
    // convert angles to radians. Add offset
    // convert angles to radians. Add offset
    rx = (_degrees[i] + _offset)  * (Math.PI /180);
    ry = (_degrees[i] + _offset) * (Math.PI /180);
    x = centerX + _rd * Math.cos(rx);
    y = centerY + _rd * Math.sin(ry);
    if(i < 2 ){
      ctx.fillStyle="#13377f";
    }else if(i > 2 && i < 5){
      ctx.fillStyle="#6a67ce";
    }else if(i > 5){
      ctx.fillStyle="#6d0949";
    }else if(i >= _degrees.length -1){
      ctx.fillStyle="#13377f";
    }
    if(i <= _degrees.length -2){
      ctx.beginPath();
      ctx.arc(x,y,5,0,2*Math.PI)
      ctx.closePath();
      ctx.fill();
      ctx.arc(x,y,6,0,2*Math.PI)
      ctx.stroke();
    }



  });
  ctx.closePath();

}
var _p1 = 0;
var _p2 = 0;
var _p3 = 0;

var _g1 = 0;
var _g2 = 0;
var _g3 = 0;

var _l1 = 0;
var _l2 = 0;
var _l3 = 0;

var _h1 = 0;
var _h2 = 0;
var _h3 = 0;
window.onload = function()
 {

    var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));

    elems.forEach(function(html) {
      var switchery = new Switchery(html, { size: 'small',color:"#468EEB" });
    });

   window.apiClient = new PowerApiClient(function(a){
     window.apiData = a;
     _p1 = apiClient.getUser().obj.gamification.personal["problem.awareness"];
     _p1 += apiClient.getUser().obj.gamification.political["problem.awareness"];
     _p1 += apiClient.getUser().obj.gamification.social["problem.awareness"];

     // ---------------------------------------------------------------------//
     _p2 = apiClient.getUser().obj.gamification.personal["practical.knowledge"];
     _p2 += apiClient.getUser().obj.gamification.political["practical.knowledge"];
     _p2 += apiClient.getUser().obj.gamification.social["practical.knowledge"];

     _p3 = apiClient.getUser().obj.gamification.personal["ready.for.action"];
     _p3 += apiClient.getUser().obj.gamification.political["ready.for.action"];
     _p3 += apiClient.getUser().obj.gamification.social["ready.for.action"];
     changeProgress(_p1,_p2,_p3);
     // ----------GLOBALS-----------------------------------------------------//
     _g1 = apiClient.getGlobal().obj.gamification.personal["problem.awareness"];
     _g1 += apiClient.getGlobal().obj.gamification.political["problem.awareness"];
     _g1 += apiClient.getGlobal().obj.gamification.social["problem.awareness"];

     _g2 = apiClient.getGlobal().obj.gamification.personal["practical.knowledge"];
     _g2 += apiClient.getGlobal().obj.gamification.political["practical.knowledge"];
     _g2 += apiClient.getGlobal().obj.gamification.social["practical.knowledge"];

     _g3 = apiClient.getGlobal().obj.gamification.personal["ready.for.action"];
     _g3 += apiClient.getGlobal().obj.gamification.political["ready.for.action"];
     _g3 += apiClient.getGlobal().obj.gamification.social["ready.for.action"];
     setGPAPoints(_g1);
     setGKHPoints(_g2);
     setGRAPoints(_g3);

     // ---------------------------------------------------------------------//
     _l1 = apiClient.getUser().obj.gamification.personal["problem.awareness"];
     _l1 += apiClient.getUser().obj.gamification.personal["practical.knowledge"];
     _l1 += apiClient.getUser().obj.gamification.personal["ready.for.action"];

     _l2 = apiClient.getUser().obj.gamification.political["problem.awareness"];
     _l2 += apiClient.getUser().obj.gamification.political["practical.knowledge"];
     _l2 += apiClient.getUser().obj.gamification.political["ready.for.action"];

     _l3 = apiClient.getUser().obj.gamification.social["problem.awareness"];
     _l3 += apiClient.getUser().obj.gamification.social["practical.knowledge"];
     _l3 += apiClient.getUser().obj.gamification.social["ready.for.action"];

     setProgressPowerBar(_l2,1); // political
     setProgressPowerBar(_l3,2); // social
     setProgressPowerBar(_l1,3); // personal



     _h1 = apiClient.getGlobal().obj.gamification.personal["problem.awareness"];
     _h1 += apiClient.getGlobal().obj.gamification.personal["practical.knowledge"];
     _h1 += apiClient.getGlobal().obj.gamification.personal["ready.for.action"];

     _h2 = apiClient.getGlobal().obj.gamification.political["problem.awareness"];
     _h2 += apiClient.getGlobal().obj.gamification.political["practical.knowledge"];
     _h2 += apiClient.getGlobal().obj.gamification.political["ready.for.action"];

     _h3 = apiClient.getGlobal().obj.gamification.social["problem.awareness"];
     _h3 += apiClient.getGlobal().obj.gamification.social["practical.knowledge"];
     _h3 += apiClient.getGlobal().obj.gamification.social["ready.for.action"];

     // setg_pa(_h1);
     // setg_so(_h2);
     // setg_in(_h3);
     addPowerBarLevelsPA(_l2,_h2);
     addPowerBarLevelsSO(_l3,_h3);
     addPowerBarLevelsIN(_l1,_h1);
     _totalProgress = _l1 + _l2 + _l3;
     document.getElementById("total_score").innerHTML = _totalProgress;
     setWardenProgress(_totalProgress);
     resize();

   });


 }
 document.getElementsByClassName("js-switch")[2].addEventListener("change",function(e){
   toggleSpider();
 })
 document.getElementsByClassName("js-switch")[1].addEventListener("change",function(e){
   toggleLevelsPersonalImpact();
 })
 document.getElementsByClassName("js-switch")[0].addEventListener("change",function(e){
   toggleLevelsPersonalPreparedness();
 })
 function initPoligons(toggleStatus){
   initSpider();
   // addGoals();
   // addImpact();
   addGraphGoal();
   addLeyendR();
   addSize(apiClient.getGlobal().obj.participants);

   // apiClient.getGlobal().obj.gamification.social
   _dataGlobal = apiClient.getGlobal().obj.gamification;
   _dataGlobalSocial    = _dataGlobal.social;
   _dataGlobalPolitical = _dataGlobal.political;
   _dataGlobalPersonal  = _dataGlobal.personal;

   addPolygons([
                    _dataGlobalPersonal["problem.awareness"],
                    _dataGlobalSocial["problem.awareness"],
                    _dataGlobalPolitical["problem.awareness"],
                    _dataGlobalPersonal["ready.for.action"],
                    _dataGlobalSocial["ready.for.action"],
                    _dataGlobalPolitical["ready.for.action"],
                    _dataGlobalPersonal["practical.knowledge"],
                    _dataGlobalSocial["practical.knowledge"],
                    _dataGlobalPolitical["practical.knowledge"],
                    _dataGlobalPersonal["problem.awareness"],
                  ],false); //global

   if(toggleStatus){
     _dataPersonal = apiClient.getUser().obj.gamification;
     _dataPersonalSocial    = _dataPersonal.social;
     _dataPersonalPolitical = _dataPersonal.political;
     _dataPersonalPersonal  = _dataPersonal.personal;
     addPolygons([
                    _dataPersonalPersonal["problem.awareness"],
                    _dataPersonalSocial["problem.awareness"],
                    _dataPersonalPolitical["problem.awareness"],
                    _dataPersonalPersonal["ready.for.action"],
                    _dataPersonalSocial["ready.for.action"],
                    _dataPersonalPolitical["ready.for.action"],
                    _dataPersonalPersonal["practical.knowledge"],
                    _dataPersonalSocial["practical.knowledge"],
                    _dataPersonalPolitical["practical.knowledge"],
                    _dataPersonalPersonal["problem.awareness"],
                    // _dataPersonalPersonal["ready.for.action"],

                    ],true); //personal
   }
   addLeyend(toggleStatus);

 }
 function toggleSpider(){
   // _switchS = document.getElementById("myonoffswitch");
   _checked = document.getElementsByClassName("js-switch")[2].checked;
   initPoligons(_checked)
 }
 function toggleLevelsPersonalImpact(){
   _checked = document.getElementsByClassName("js-switch")[1].checked;
   pList = document.getElementsByClassName("points_separator_bar")

   for (var i = 0; i < pList.length; i++) {
      (true) ? pList[i].style.display = "none" : pList[i].style.display = "block";
   }
   // pList = document.getElementsByClassName("points_row_bar r")

   // for (var i = 0; i < pList.length; i++) {
   //    (!_checked) ? pList[i].style.display = "none" : pList[i].style.display = "block";
   // }
   if(_checked){
      document.getElementsByClassName("points_row_bar l")[0].style.display = "none";
      document.getElementsByClassName("points_row_bar r")[0].style.display = "block";
      document.getElementsByClassName("points_row_bar l")[1].style.display = "none";
      document.getElementsByClassName("points_row_bar r")[1].style.display = "block";
      document.getElementsByClassName("points_row_bar l")[2].style.display = "none";
      document.getElementsByClassName("points_row_bar r")[2].style.display = "block";
     // document.getElementsByClassName("points_row_bar")[1].style.display = "none"
     // document.getElementsByClassName("points_row_bar")[2].style.display = "none"


     setProgressPowerBar(_h2,2);
     setProgressPowerBar(_h3,3);
     setProgressPowerBar(_h1,1);
     document.getElementsByClassName("lan_title_personal_impact")[0].innerHTML = _loc[CURRENT_LAN].lan_title_community_impact;
   }else{
     document.getElementsByClassName("points_row_bar l")[0].style.display = "block";
     document.getElementsByClassName("points_row_bar r")[0].style.display = "none";
     document.getElementsByClassName("points_row_bar l")[1].style.display = "block";
     document.getElementsByClassName("points_row_bar r")[1].style.display = "none";
     document.getElementsByClassName("points_row_bar l")[2].style.display = "block";
     document.getElementsByClassName("points_row_bar r")[2].style.display = "none";
     document.getElementsByClassName("lan_title_personal_impact")[0].innerHTML = _loc[CURRENT_LAN].lan_title_personal_impact;
     // document.getElementsByClassName("points_row_bar")[0].style.display = "block"
     // document.getElementsByClassName("points_row_bar")[1].style.display = "block"
     // document.getElementsByClassName("points_row_bar")[2].style.display = "block"
     setProgressPowerBar(_l2,1);
     setProgressPowerBar(_l3,2);
     setProgressPowerBar(_l1,3);


   }


 }
 function toggleLevelsPersonalPreparedness(){
   _checked = document.getElementsByClassName("js-switch")[0].checked;
   pList = document.getElementsByClassName("points_separator")
   for (var i = 0; i < pList.length; i++) {
      (true) ? pList[i].style.display = "none" : pList[i].style.display = "block";
   }
   pList = document.getElementsByClassName("points_row l")
   for (var i = 0; i < pList.length; i++) {
      (_checked) ? pList[i].style.display = "none" : pList[i].style.display = "block";
   }

   _pp1 = document.getElementById("pag_points");
   _pp2 = document.getElementById("khg_points");
   _pp3 = document.getElementById("rag_points");
   if(!_checked){
     _pp1.classList.add("points_right");
     _pp1.classList.remove("points_left");

     _pp2.classList.add("points_right");
     _pp2.classList.remove("points_left");
     _pp2.classList.remove("kh_bg");
     _pp2.classList.add("kh_txt");


     _pp3.classList.add("points_right");
     _pp3.classList.remove("points_left");
     _pp3.classList.remove("ra_bg");
     _pp3.classList.add("ra_txt");
     changeProgress(_p1,_p2,_p3);
     document.getElementsByClassName("lan_title_personal_preparedness")[0].innerHTML = _loc[CURRENT_LAN].lan_title_personal_preparedness;

     document.getElementsByClassName("points_row r")[0].style.display = "none";

     document.getElementsByClassName("points_row r")[1].style.display = "none";

     document.getElementsByClassName("points_row r")[2].style.display = "none";

   }else{
     _pp1.classList.remove("points_right");
     _pp1.classList.add("points_left");

     _pp2.classList.remove("points_right");
     _pp2.classList.add("points_left");
     _pp2.classList.add("kh_bg");
     _pp2.classList.remove("kh_txt");

     _pp3.classList.remove("points_right");
     _pp3.classList.add("points_left");
     _pp3.classList.add("ra_bg");
     _pp3.classList.remove("ra_txt");
     changeProgress(_g1,_g2,_g3);
     document.getElementsByClassName("lan_title_personal_preparedness")[0].innerHTML = _loc[CURRENT_LAN].lan_title_community_preparedness;

     document.getElementsByClassName("points_row r")[0].style.display = "block";

     document.getElementsByClassName("points_row r")[1].style.display = "block";

     document.getElementsByClassName("points_row r")[2].style.display = "block";

   }

 }
 function toggleHideableArea(el){
   var w = window.innerWidth;
   _hideable_area = el.parentElement.getElementsByClassName("hideable-area")[0];
   if(_hideable_area.style.display != "none"){
     _hideable_area.style.display = "none"
     el.parentElement.style.height = "100px";
     el.classList.remove("arrow-down");
     el.classList.add("arrow-up");
   }else{
     _hideable_area.style.display = "block"
     if(el.getAttribute("data") == "1" && w < 650){
       el.parentElement.style.height = "780px";
     }else{
       el.parentElement.style.height = "auto";

     }
     el.classList.remove("arrow-up");
     el.classList.add("arrow-down");

   }
 }
 function resize(){

   if(WIDTH != window.innerWidth){
     _checked = document.getElementsByClassName("js-switch")[2].checked;
     initPoligons(_checked);
     toggleLevelsPersonalImpact();
     toggleLevelsPersonalPreparedness();
     HEIGHT = window.innerHeight;
     WIDTH  = window.innerWidth;
     if(WIDTH < 560){
       document.getElementsByClassName("indicatora")[0].style.height = "900px";
     }else{
       document.getElementsByClassName("indicatora")[0].style.height = "auto"
     }


   }

 }
 function powerPopup(content){
   _content = document.getElementById("powerPopupContent")
   _content.innerHTML = content;
   _els = document.getElementsByClassName("powerPopup");
   for (var i = 0; i < _els.length; i++) {
     _els[i].style.display = "flex";
   }
 }
 function hidePowerPopup(){
   _els = document.getElementsByClassName("powerPopup");
   for (var i = 0; i < _els.length; i++) {
     _els[i].style.display = "none";
   }
 }
function m1(){
   powerPopup(_loc[CURRENT_LAN].lan_help_m1_content)
}
function m2(){
  powerPopup(_loc[CURRENT_LAN].lan_help_m2_content)
}
function m3(){
  powerPopup(_loc[CURRENT_LAN].lan_help_m3_content)
}
function m4(){
  powerPopup(_loc[CURRENT_LAN].lan_help_m4_content)

}
function m5(){
  powerPopup(_loc[CURRENT_LAN].lan_help_m5_content)
}
function m6(){
  powerPopup(_loc[CURRENT_LAN].lan_help_m6_content)

}
</script>
</html>
