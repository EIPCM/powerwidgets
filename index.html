<html>
  <head>
   <link rel="stylesheet" type="text/css" href="css/powerwidgets.css">
   <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css?family=Fredoka+One" rel="stylesheet">
   <script type="text/javascript" src="//city.power-h2020.eu/redesign_js/client.js"></script> <!-- need to include this script to talk with the api -->
  </head>
  <body  onresize="toggleSpider()">
  <div class="indicators">

    <div class="indicator indicatora">

      <div class="powerTitle">Personal Preparedness</div>
      <div class="circularWrapper">
      <div class="svgWrapper">
        <div class="circularTitle">Problem<br> Awareness</div>
        <svg
           class="progress-ring"
           width="120"
           fill="#13377f"
           height="120"
           shape-rendering="geometricPrecision"
           >
          <circle
            id="circ_1"
            class="progress-ring__circle"
            transform="rotate(-90 0 0)"
            stroke="#6d0949"
            stroke-width="50"
            fill="#13377f"
            r="30"
            cx="60"
            cy="60"/>
          <circle
            stroke="white"
            stroke-width="2"
            fill="#6d0949"
            r="30"
            cx="60"
            cy="60"/>
          <circle
            stroke="#6d0949"
            stroke-width="2"
            fill="transparent"
            r="57"
            cx="60"
            cy="60"/>
          <image xlink:href="img/idea.png" height="120" width="120"  rx="15" ry="15" />

        </svg>
        <div class="circularLevelsWrapper">
          <img src="img/circ_idea.png" class="iconsmall"/>
          <img src="img/circ_idea_gray.png" class="iconsmall"/>
          <img src="img/circ_idea_gray.png" class="iconsmall"/>
        </div>

      </div>
      <div class="svgWrapper">
        <div class="circularTitle">Know- <br>How</div>

        <svg
           class="progress-ring"
           width="120"
           fill="#13377f"
           height="120"
           shape-rendering="geometricPrecision"
           >
          <circle
            class="progress-ring__circle"
            transform="rotate(-90 0 0)"
            stroke="#13377f"
            stroke-width="50"
            fill="#13377f"
            r="30"
            cx="60"
            cy="60"
            id="circ_2"
            />
          <circle
            stroke="white"
            stroke-width="2"
            fill="#13377f"
            r="30"
            cx="60"
            cy="60"/>
          <circle
            stroke="#13377f"
            stroke-width="2"
            fill="transparent"
            r="57"
            cx="60"
            cy="60"/>
          <image xlink:href="img/prob_awe.png" height="120" width="120"  rx="15" ry="15" />
        </svg>
        <div class="circularLevelsWrapper">
          <img src="img/circ_talk.png" class="iconsmall"/>
          <img src="img/circ_talk_gray.png" class="iconsmall"/>
          <img src="img/circ_talk_gray.png" class="iconsmall"/>
        </div>
      </div>

      <div class="svgWrapper">
        <div class="circularTitle">Ready <br>to Act</div>

        <svg
           class="progress-ring"
           width="120"
           fill="#493f8d"
           height="120"
           shape-rendering="geometricPrecision"
           >
          <circle
            class="progress-ring__circle"
            transform="rotate(-90 0 0)"
            stroke="#493f8d"
            stroke-width="50"
            fill="#493f8d"
            r="30"
            cx="60"
            cy="60"
            id="circ_3"
            />
          <circle
            stroke="white"
            stroke-width="2"
            fill="#493f8d"
            r="30"
            cx="60"
            cy="60"/>
          <circle
            stroke="#493f8d"
            stroke-width="2"
            fill="transparent"
            r="57"
            cx="60"
            cy="60"/>
          <image xlink:href="img/ready_act.png" height="120" width="120"  rx="15" ry="15" />
        </svg>
        <div class="circularLevelsWrapper">
          <img src="img/circ_stopwatch.png" class="iconsmall"/>
          <img src="img/circ_stopwatch_gray.png" class="iconsmall"/>
          <img src="img/circ_stopwatch_gray.png" class="iconsmall"/>
        </div>
      </div>

    </div>
    <div class="toggleWrapper">
      <div class="onoffswitch" onclick="toggleSpider()">
          <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
          <label class="onoffswitch-label" for="myonoffswitch"></label>
      </div>
      <div style="font-family: 'Fredoka One', cursive;margin-top: 10px;margin-right:5px;">Show Levels</div>
    </div>

    </div>
    <div class="powerMessage">Yoou are well aware about flood issues, but try to improve your Know-How next time!</div>

      <div class="indicator indicatorb">
        <div class="powerTitle">Personal Impact</div>
        <div class="toggleWrapper">
          <div class="onoffswitch" onclick="toggleSpider()">
              <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
              <label class="onoffswitch-label" for="myonoffswitch"></label>
          </div>
          <div style="font-family: 'Fredoka One', cursive;margin-top: 10px;margin-right:5px;">Show Levels</div>
        </div>
      <div class="powerRow">
        <div class="powerBartitle">Political</div><div class="powerBarWrapper">
          <div class="powerBarLevelsWrapper">
            <img src="img/political.png" class="iconsmall"/>
            <img src="img/political.png" class="iconsmall"/>
            <img src="img/political_gray.png" class="iconsmall"/>
          </div>
          <div class="iconWrapper political">
            <img src="img/political.png" class="icon political"/>
          </div>
          <div class="pwrapper">
            <div class="powerBar political">
              <div class="powerScaleWrapper" style="">
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
                <div class="powerScale political">
                </div>
              </div>

              <div class="fill political" style="width: 50%;" id="powerBar1"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="powerRow">
        <div class="powerBartitle">Social</div><div class="powerBarWrapper">
          <div class="powerBarLevelsWrapper">
            <img src="img/users-group.png" class="iconsmall"/>
            <img src="img/users-group.png" class="iconsmall"/>
            <img src="img/users-group_gray.png" class="iconsmall"/>
          </div>
          <div class="iconWrapper social">
            <img src="img/users-group.png" class="icon political"/>
          </div>
          <div class="pwrapper">
            <div class="powerScaleWrapper" style="">
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
              <div class="powerScale social">
              </div>
            </div>
            <div class="powerBar social">
              <div class="fill social" style="width: 50%;" id="powerBar2"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="powerRow">
      <div class="powerBartitle">Individual</div><div class="powerBarWrapper">
        <div class="powerBarLevelsWrapper">
          <img src="img/people.png" class="iconsmall"/>
          <img src="img/people.png" class="iconsmall"/>
          <img src="img/people_gray.png" class="iconsmall"/>
        </div>
          <div class="iconWrapper individual">
            <img src="img/people.png" class="icon political"/>
          </div>
          <div class="pwrapper">
            <div class="powerBar individual">
              <div class="powerScaleWrapper" style="">
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
                <div class="powerScale individual">
                </div>
              </div>
              <div class="fill individual" style="width: 100%;" id="powerBar3"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="powerMessage">Great individual work, but try to improve your political impact</div>

    <div class="indicator indicatorc">
      <div class="powerTitle">Flood Warden Achievement</div>
      <div class="powerContent" style="float:left;width:50%">
        <div class="warden">
          <div class="badge earned" >
            <img src="img/badge1.png"/>
            <div class="level_lbl"><b>Beginner</b> 1000</div>
          </div>
          <div id="warden_bar_1">
            <div id="warden_bar1_fill"  style="width:0%"></div>
          </div>
          <div class="badge " id="badge2">
            <img src="img/badge2.png" id="badge_img2"/>
            <div class="level_lbl"><b>Intermediate</b> 4000</div>
          </div>
          <div id="warden_bar_2">
            <div id="warden_bar2_fill" style="width:0%"></div>
          </div>
          <div class="badge " id="badge3">
            <img src="img/badge3.png" id="badge_img3"/>
            <div class="level_lbl"><b>Advanced</b> 10000</div>
          </div>
        </div>

      </div>
      <div class="powerContent">
          <div class="boost_factor_wrapper">
            <div class="boost_factor 1">1.5x</div>
            <div class="boost_factor 2">2x</div>
            <div class="boost_factor 3">3x</div>
          </div>
      </div>

    </div>
    <div class="powerMessage">You are a Beginner Flood Warden and your boost factor is 1.5. Way to go!</div>

    <div class="indicator indicatord">
      <div class="powerTitle">Community Preparedness</div>
      <div class="toggleWrapper">
        <div class="onoffswitch" onclick="toggleSpider()">
            <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
            <label class="onoffswitch-label" for="myonoffswitch"></label>
        </div>
        <div style="font-family: 'Fredoka One', cursive;margin-top: 10px;margin-right:5px;">Show Personal</div>
      </div>



      <div style="margin-left:auto;margin-right:auto;">
        <canvas id="spider" height="350" width="750" style="z-index:1"></canvas>
      </div>

    </div>
    <div class="powerMessage">Help the community to get 10% more prepared for flooding!</div>

  </div>
</div>
  </body>
<script>
var circle = document.getElementById("circ_1");
var radius = circle.r.baseVal.value;
var circumference = radius * 2 * Math.PI;

var circle2 = document.getElementById("circ_2");
var radius2 = circle.r.baseVal.value;
var circumference2 = radius2 * 2 * Math.PI;

var circle3 = document.getElementById("circ_3");
var radius3 = circle.r.baseVal.value;
var circumference3 = radius3 * 2 * Math.PI;

circle.style.strokeDasharray = `${circumference} ${circumference}`;
circle.style.strokeDashoffset = `${circumference}`;
circle2.style.strokeDasharray = `${circumference} ${circumference}`;
circle2.style.strokeDashoffset = `${circumference}`;
circle3.style.strokeDasharray = `${circumference} ${circumference}`;
circle3.style.strokeDashoffset = `${circumference}`;


function setProgress(percent) {
  const offset = circumference - percent / 100 * circumference;
  circle.style.strokeDashoffset = offset;
}

const input = document.getElementById('input1');
/*setProgress(input.value);

input.addEventListener('change', function(e) {
  if (input.value < 101 && input.value > -1) {
    setProgress(input.value);
  }
})*/
// 2




function setProgress2(percent) {
  const offset2 = circumference2 - percent / 100 * circumference2;
  circle2.style.strokeDashoffset = offset2;
}

const input2 = document.getElementById('input2');
/*setProgress2(input2.value);

input2.addEventListener('change', function(e) {
  if (input2.value < 101 && input2.value > -1) {
    setProgress2(input2.value);
  }
})*/

// 3


function setProgress3(percent) {
  const offset3 = circumference3 - percent / 100 * circumference3;
  circle3.style.strokeDashoffset = offset3;
}

const input3 = document.getElementById('input3');
/*setProgress3(input3.value);

input3.addEventListener('change', function(e) {
  if (input3.value < 101 && input3.value > -1) {
    setProgress3(input3.value);
  }
})*/
function changeProgress(){
  setProgress(33);
  setProgress2(66);
  setProgress3(100);
}
setTimeout(function(){ changeProgress() }, 1000);
function setProgressPowerBar(p,n){
  _pbar = document.getElementById("powerBar"+n);
  _pbar.style.width = p + "%";
}
function setWardenProgress(p){
  if(p < 100){
    // set only level 1, disable all the rest
    document.getElementById("warden_bar1_fill").style.width = p + "%"
    document.getElementById("warden_bar2_fill").style.width = "0%"
    document.getElementById("badge2").classList.remove("earned")
    document.getElementById("badge3").classList.remove("earned")
    document.getElementById("badge_img2").src = "img/badge2.png";
    document.getElementById("badge_img3").src = "img/badge3.png";

  }else{
    document.getElementById("warden_bar1_fill").style.width = "100%"
    document.getElementById("warden_bar2_fill").style.width = (Math.abs(100 - p) + "%");
    document.getElementById("badge2").classList.add("earned")
    document.getElementById("badge_img2").src = "img/badge2_earned.png";
    document.getElementById("badge_img3").src = "img/badge3.png";
    document.getElementById("badge3").classList.remove("earned")


    if(p >= 200){
      document.getElementById("badge3").classList.add("earned")
      document.getElementById("badge_img3").src = "img/badge3_earned.png";
    }
  }
}
function initSpider(){
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  c = canvas.height * .50;
  console.log(c);
  canvas.width = canvas.parentElement.offsetWidth;
  canvas.height = canvas.parentElement.offsetHeight;
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  centerX = sizeWidth/2;
  centerY = sizeHeight/2;
  r = sizeWidth *.30;
  if(sizeWidth >= sizeHeight){
    r = sizeHeight *.30;
  }
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.beginPath();
  // console.log(sizeWidth/2);
  // console.log(sizeHeight/2);
  ctx.beginPath();
  ctx.arc(centerX,centerY,1,0,2*Math.PI)
  ctx.strokeStyle = '#d7dadd';
  _goals  = [0,3,6]
  // draw 10 lines, all with the same distance between each other
  for (var i = 0; i < 11; i++) {
    if(_goals.includes(i)){
      ctx.lineWidth   = 2;
      ctx.strokeStyle = '#848177';
    }else{
      ctx.lineWidth   = 1;
      ctx.strokeStyle = '#d7dadd';
    }
    ctx.beginPath();
    ctx.arc(centerX,centerY, r - ( i *  r / 10 ) ,0,2*Math.PI)
    ctx.stroke();


  }

  _degrees = [0,40,80,120,160,200,240,280,320];
  _labels  = [" Ready to act","Awareness","Know-how","Ready to act","Awareness","Know-how","Ready to act","Awareness","   Know-how",]
  _categories = ["Social","Political","Individual"]
  _categoriesIndexes = [1,4,7]
  _offset = 10; //All lines will be turned with this offset.
  _extraRadius = 20;
  ctx.lineWidth   = 1;
  _labelColors = ["#2dc463","#e23d3d","#1786e0"]

  _degrees.forEach(function(d,i){
    ctx.beginPath();
    ctx.moveTo(centerX ,centerY);
    // convert angles to radians. Add offset
    rx = (d + _offset)  * (Math.PI /180);
    ry = (d + _offset) * (Math.PI /180);
    x = centerX + (r * 1.1) * Math.cos(rx);
    y = centerY + (r * 1.1) * Math.sin(ry);
    ctx.lineTo(x,y);
    if(sizeWidth <  620){
      ctx.font = "10px Arial";

    }else{
      ctx.font = "13px Arial";

    }
    rx = (d + _offset)  * (Math.PI /180);
    ry = (d + _offset) * (Math.PI /180);
    x = centerX + r*1.17  * Math.cos(rx);
    y = centerY + r*1.17 * Math.sin(ry);
    if(i < 4){
      textOffset = 20;
    }else{
      textOffset = 40;
    }
    if(i < 2 ){
      ctx.fillStyle = _labelColors[0];
    }else if(i > 2 && i < 5){
      ctx.fillStyle = _labelColors[1];
    }else if(i > 5){
      ctx.fillStyle = _labelColors[2];
    }else if(i >= _degrees.length -1){
      ctx.fillStyle = _labelColors[0];
    }
    ctx.fillText(_labels[i],x-textOffset,y);
    ctx.stroke();
    ctx.closePath();

    if(_categoriesIndexes.includes(i) && sizeWidth > 620  ){

      rx = (d+20)  * (Math.PI /180);
      ry = (d+20) * (Math.PI /180);
      x = centerX + r*1.15  * Math.cos(rx);
      y = centerY + r*1.15 * Math.sin(ry);
      ctx.font = "20px Arial";
      ctx.beginPath();
      textoffset = 50;
      switch (i) {
        case 1:
        textoffset = 0;
        break;
        case 4:
        textoffset = 40;
        break;
        case 7:
        textoffset = 0;
        break;
        default:

      }
      ctx.fillText(_categories[0],x-textoffset,y);
      ctx.stroke();
      ctx.closePath();
    }
    ctx.font = "13px Arial";


  });


  ctx.closePath();

}

function addGoals(){
  _degrees = [0,20,30,60,160,200,240,280,320,360];
  _offset = 10; //All lines will be turned with this offset.
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  values = [4,7,10]
  if(sizeWidth <  620){
    _labels = ["+2%", "+5%","+10%"]
    _marginRightA = 30;
    _marginRightB = 30;
    _marginRightC = 25;
    ctx.font = "11px Arial";

  }else{
    _labels = ["(2% more prepared)", "(5% more prepared)","(10% more prepared)"]

    _marginRightA = 45;
    _marginRightB = 122;
    _marginRightC = 115;
    ctx.font = "13px Arial";

  }

  values.forEach(function(v,i){
    vi = Math.abs(v - _degrees.length);
    _rd  = r - ( vi  *  r / 10 ) //radius distance
    // convert angles to radians. Add offset
    // convert angles to radians. Add offset
    rx = (_degrees[0+i] + _offset)  * (Math.PI /180);
    ry = (_degrees[0+i] + _offset) * (Math.PI /180);
    x = centerX + _rd * Math.cos(rx);
    y = centerY + _rd * Math.sin(ry);
    ctx.beginPath();
    ctx.lineWidth   = 2;
    ctx.strokeStyle = '#848177';
    ctx.moveTo(x,y);
    ctx.fillStyle   = "#848177";

    if(sizeWidth <  620){
      ctx.lineTo(x,sizeHeight - (10 * i) - 60);
      if( v == 4){
        ctx.fillText("Goals",x -20,sizeHeight - _marginRightA -10);
      }
      if(v == 10){
        ctx.fillText(_labels[i],x , sizeHeight - 70);
      }else if(v == 7){
        ctx.fillText(_labels[i],x , sizeHeight - 60 );
      }else{
        ctx.fillText(_labels[i],x , sizeHeight - 50 );

      }
    }else{
      ctx.lineTo(sizeWidth,y)
      if( v == 4){
        ctx.fillText("Goals",sizeWidth - _marginRightA,y-15);
      }
      if(v == 10){
        ctx.fillText(_labels[i],sizeWidth - _marginRightB,y+15);
      }else{
        ctx.fillText(_labels[i],sizeWidth - _marginRightC,y+15);
      }
    }

    ctx.stroke();
  });
}
function addLeyend(){
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;
  ctx.strokeStyle = '#293b47'; //black
  ctx.lineWidth   = 2;
  ctx.beginPath();
  if(sizeWidth <  620){
    _ln  = sizeWidth * .3;

  }else{
    _ln  = sizeWidth * .1;

  }

  marginRight = 0;
  ctx.setLineDash([0]);
  if(sizeWidth <  620){
    ctx.moveTo(25 + sizeWidth - sizeWidth /2 + _ln,340);
    ctx.lineTo(25 + sizeWidth - sizeWidth /2 ,340);
  }else{
    ctx.moveTo(sizeWidth - marginRight - _ln,100);
    ctx.lineTo(sizeWidth - marginRight ,100);
  }



  ctx.stroke();
  ctx.closePath();
//
if(sizeWidth <  620){
  ctx.beginPath();
  ctx.font = "bold 12px Arial";
  ctx.fillStyle = '#293b47'; //black
  ctx.fillText("Community", sizeWidth - sizeWidth /2 + _ln/2,320);
  ctx.font = "13px Arial";
  ctx.closePath();

  ctx.beginPath();
  ctx.font = "bold 12px Arial";
  ctx.fillStyle = '#293b47'; //black
  ctx.fillText("Personal",sizeWidth - sizeWidth /2 - _ln  ,320);
  ctx.font = "13px Arial";
  ctx.closePath();

  ctx.beginPath();
  ctx.setLineDash([3]);



  ctx.stroke();
}else{
  ctx.beginPath();
  ctx.font = "bold 16px Arial";
  ctx.fillStyle = '#293b47'; //black
  ctx.fillText("Community",sizeWidth - marginRight - 90 ,120);
  ctx.font = "13px Arial";
  ctx.closePath();

  ctx.beginPath();
  ctx.font = "bold 16px Arial";
  ctx.fillStyle = '#293b47'; //black
  ctx.fillText("Personal",sizeWidth - marginRight - 70 ,70);
  ctx.font = "13px Arial";
  ctx.closePath();

  ctx.beginPath();
  ctx.setLineDash([3]);



  ctx.stroke();
}

//


  ctx.strokeStyle = '#84561a'; //brown


  if(sizeWidth <  620){
    ctx.moveTo(sizeWidth - sizeWidth /2 - _ln -25 ,340);
    ctx.lineTo(sizeWidth - sizeWidth /2 - 25 ,340);
  }else{
    ctx.moveTo(sizeWidth - marginRight - _ln,50);
    ctx.lineTo(sizeWidth - marginRight ,50);
  }

  ctx.closePath();
  ctx.stroke();
  _labelColors = ["#1786e0", "#e23d3d","#2dc463"]

  _labelColors.forEach(function(l,i){
    ctx.strokeStyle = '#293b47'; //black
    ctx.setLineDash([0]);
    ctx.beginPath();
    ctx.fillStyle = l;
    if(sizeWidth <  620){
      ctx.arc(_ln + 25 + sizeWidth - sizeWidth/2  -  _ln * (i / 3) - (_ln /6),340,5,0,2*Math.PI)
    }else{
      ctx.arc(sizeWidth - marginRight  -  _ln * (i / 3) - (_ln /6),100,5,0,2*Math.PI)
    }

    ctx.closePath();
    ctx.fill();
    ctx.stroke();


    ctx.strokeStyle = '#84561a'; //brown
    ctx.setLineDash([3]);
    ctx.beginPath();
    ctx.fillStyle = l;
    if(sizeWidth <  620){
      ctx.arc( sizeWidth - sizeWidth/2  -  _ln * (i / 3) - (_ln /6) - 25,340,5,0,2*Math.PI)
    }else{
      ctx.arc(sizeWidth - marginRight  -  _ln * (i / 3) - (_ln /6),50,5,0,2*Math.PI)
    }

    ctx.closePath();
    ctx.fill();
    ctx.stroke();
  });


}
function addPoligons(values,dashed){
  _degrees = [0,40,80,120,160,200,240,280,320,360];
  _offset = 10; //All lines will be turned with this offset.
  var canvas = document.getElementById("spider");
  var ctx = canvas.getContext("2d");
  var sizeWidth = ctx.canvas.clientWidth;
  var sizeHeight = ctx.canvas.clientHeight;
  var scaleWidth = sizeWidth/100;
  var scaleHeight = sizeHeight/100;

  c = canvas.height * .10;


  centerX = sizeWidth/2;
  centerY = sizeHeight/2;
  r = sizeWidth *.30;
  if(sizeWidth >= sizeHeight){
    r = sizeHeight *.30;
  }

  ctx.lineWidth   = 2;
  ctx.beginPath();
  if(dashed){
    ctx.setLineDash([3]);
    ctx.strokeStyle = '#84561a';
  }else{
    ctx.strokeStyle = '#293b47';

  }
  values.forEach(function(v,i){
    vi = Math.abs(v - _degrees.length);
    _rd  = r - ( vi  *  r / 10 ) //radius distance
    // convert angles to radians. Add offset
    // convert angles to radians. Add offset
    rx = (_degrees[i] + _offset)  * (Math.PI /180);
    ry = (_degrees[i] + _offset) * (Math.PI /180);
    x = centerX + _rd * Math.cos(rx);
    y = centerY + _rd * Math.sin(ry);
    ctx.lineTo(x,y);
    if(dashed){
      ctx.setLineDash([3]);
    }
    ctx.moveTo(x,y);

  });
  ctx.closePath();
  ctx.stroke();
  if(dashed){
    ctx.setLineDash([3]);
  }
  ctx.fillStyle="#1786e0";
  ctx.fillStyle="#e23d3d";
  ctx.fillStyle="#2dc463";
  values.forEach(function(v,i){
    vi = Math.abs(v - _degrees.length);
    _rd  = r - ( vi  *  r / 10 ) //radius distance
    // convert angles to radians. Add offset
    // convert angles to radians. Add offset
    rx = (_degrees[i] + _offset)  * (Math.PI /180);
    ry = (_degrees[i] + _offset) * (Math.PI /180);
    x = centerX + _rd * Math.cos(rx);
    y = centerY + _rd * Math.sin(ry);

    if(i < 2 ){
      ctx.fillStyle="#2dc463";
    }else if(i > 2 && i < 5){
      ctx.fillStyle="#e23d3d";
    }else if(i > 5){
      ctx.fillStyle="#1786e0";
    }else if(i >= _degrees.length -1){
      ctx.fillStyle="#2dc463";
    }
    if(i <= _degrees.length -2){
      ctx.beginPath();
      ctx.arc(x,y,5,0,2*Math.PI)
      ctx.closePath();
      ctx.fill();
      ctx.arc(x,y,6,0,2*Math.PI)
      ctx.stroke();
    }



  });
  ctx.closePath();

}
window.onload = function()
 {
   window.apiClient = new PowerApiClient(function(a){

     window.apiData = a;
     initSpider();
     initPoligons();
   });

 }
 function initPoligons(toggleStatus){
   initSpider();
   addGoals();
   _dataPersonal = window.apiData.api.user.obj.gamification;
   _dataPersonalSocial    = _dataPersonal.gamification.social;
   _dataPersonalPolitical = _dataPersonal.gamification.political;
   _dataPersonalPersonal  = _dataPersonal.gamification.personal;
   addPoligons([    _dataPersonalSocial["practical.knowledge"],
                    _dataPersonalSocial["ready.for.action"],
                    _dataPersonalSocial["problem.awareness"],
                    _dataPersonalPolitical["practical.knowledge"],
                    _dataPersonalPolitical["ready.for.action"],
                    _dataPersonalPolitical["problem.awareness"],
                    _dataPersonalPersonal["practical.knowledge"],
                    _dataPersonalPersonal["ready.for.action"],
                    _dataPersonalPersonal["problem.awareness"]],false); //personal
   if(toggleStatus){
     _dataGlobal = window.apiData.api.challenge.obj.gamification;
     _dataGlobalSocial    = _dataGlobal.gamification.social;
     _dataGlobalPolitical = _dataGlobal.gamification.political;
     _dataGlobalPersonal  = _dataGlobal.gamification.personal;

     addPoligons([    _dataGlobalSocial["practical.knowledge"],
                      _dataGlobalSocial["ready.for.action"],
                      _dataGlobalSocial["problem.awareness"],
                      _dataGlobalPolitical["practical.knowledge"],
                      _dataGlobalPolitical["ready.for.action"],
                      _dataGlobalPolitical["problem.awareness"],
                      _dataGlobalPersonal["practical.knowledge"],
                      _dataGlobalPersonal["ready.for.action"],
                      _dataGlobalPersonal["problem.awareness"]],true); //global
   }
   addLeyend();

 }
 function toggleSpider(){
   _switchS = document.getElementById("myonoffswitch");
   initPoligons(_switchS.checked)
 }

</script>
</html>
